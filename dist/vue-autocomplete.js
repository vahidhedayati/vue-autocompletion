!function(I){var g={};function C(A){if(g[A])return g[A].exports;var n=g[A]={i:A,l:!1,exports:{}};return I[A].call(n.exports,n,n.exports,C),n.l=!0,n.exports}C.m=I,C.c=g,C.d=function(I,g,A){C.o(I,g)||Object.defineProperty(I,g,{enumerable:!0,get:A})},C.r=function(I){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(I,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(I,"__esModule",{value:!0})},C.t=function(I,g){if(1&g&&(I=C(I)),8&g)return I;if(4&g&&"object"==typeof I&&I&&I.__esModule)return I;var A=Object.create(null);if(C.r(A),Object.defineProperty(A,"default",{enumerable:!0,value:I}),2&g&&"string"!=typeof I)for(var n in I)C.d(A,n,function(g){return I[g]}.bind(null,n));return A},C.n=function(I){var g=I&&I.__esModule?function(){return I.default}:function(){return I};return C.d(g,"a",g),g},C.o=function(I,g){return Object.prototype.hasOwnProperty.call(I,g)},C.p="",C(C.s=2)}([function(module,exports,__webpack_require__){eval("// extracted by mini-css-extract-plugin\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvdnVlLWF1dG9jb21wbGV0aW9uLmNzcz84ZTgwIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBIiwiZmlsZSI6IjAuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBleHRyYWN0ZWQgYnkgbWluaS1jc3MtZXh0cmFjdC1wbHVnaW4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///0\n")},function(module,__webpack_exports__,__webpack_require__){"use strict";eval("/* harmony import */ var _node_modules_mini_css_extract_plugin_dist_loader_js_node_modules_css_loader_index_js_node_modules_vue_loader_lib_loaders_stylePostLoader_js_vue_autocompletion_css_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(0);\n/* harmony import */ var _node_modules_mini_css_extract_plugin_dist_loader_js_node_modules_css_loader_index_js_node_modules_vue_loader_lib_loaders_stylePostLoader_js_vue_autocompletion_css_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_mini_css_extract_plugin_dist_loader_js_node_modules_css_loader_index_js_node_modules_vue_loader_lib_loaders_stylePostLoader_js_vue_autocompletion_css_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__);\n/* unused harmony reexport * */\n /* unused harmony default export */ var _unused_webpack_default_export = (_node_modules_mini_css_extract_plugin_dist_loader_js_node_modules_css_loader_index_js_node_modules_vue_loader_lib_loaders_stylePostLoader_js_vue_autocompletion_css_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default.a); \n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvdnVlLWF1dG9jb21wbGV0aW9uLmNzcz9hNjg0Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFtTyxDQUFnQixxVEFBRyxFQUFDIiwiZmlsZSI6IjEuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbW9kIGZyb20gXCItIS4uL25vZGVfbW9kdWxlcy9taW5pLWNzcy1leHRyYWN0LXBsdWdpbi9kaXN0L2xvYWRlci5qcyEuLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvbG9hZGVycy9zdHlsZVBvc3RMb2FkZXIuanMhLi92dWUtYXV0b2NvbXBsZXRpb24uY3NzP3Z1ZSZ0eXBlPXN0eWxlJmluZGV4PTAmbGFuZz1jc3MmXCI7IGV4cG9ydCBkZWZhdWx0IG1vZDsgZXhwb3J0ICogZnJvbSBcIi0hLi4vbm9kZV9tb2R1bGVzL21pbmktY3NzLWV4dHJhY3QtcGx1Z2luL2Rpc3QvbG9hZGVyLmpzIS4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9sb2FkZXJzL3N0eWxlUG9zdExvYWRlci5qcyEuL3Z1ZS1hdXRvY29tcGxldGlvbi5jc3M/dnVlJnR5cGU9c3R5bGUmaW5kZXg9MCZsYW5nPWNzcyZcIiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///1\n")},function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n\n// CONCATENATED MODULE: ./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/vue-loader/lib??vue-loader-options!./src/VueAutocompletion.vue?vue&type=template&id=78198a70&\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c("span", { staticClass: "autocomplete " }, [\n    _c("input", {\n      directives: [\n        {\n          name: "model",\n          rawName: "v-model",\n          value: _vm.search,\n          expression: "search"\n        }\n      ],\n      staticClass: "form-control",\n      class: [_vm.clazz, _vm.errorClazz],\n      attrs: {\n        type: "search",\n        name: _vm.name,\n        autocomplete: _vm.name,\n        placeholder: _vm.placeholder\n      },\n      domProps: { value: _vm.search },\n      on: {\n        input: [\n          function($event) {\n            if ($event.target.composing) {\n              return\n            }\n            _vm.search = $event.target.value\n          },\n          _vm.onChange\n        ],\n        keydown: [\n          function($event) {\n            if (\n              !$event.type.indexOf("key") &&\n              _vm._k($event.keyCode, "down", 40, $event.key, [\n                "Down",\n                "ArrowDown"\n              ])\n            ) {\n              return null\n            }\n            return _vm.onArrowDown($event)\n          },\n          function($event) {\n            if (\n              !$event.type.indexOf("key") &&\n              _vm._k($event.keyCode, "tab", 9, $event.key, "Tab")\n            ) {\n              return null\n            }\n            return _vm.onTab($event)\n          },\n          function($event) {\n            if (\n              !$event.type.indexOf("key") &&\n              _vm._k($event.keyCode, "up", 38, $event.key, ["Up", "ArrowUp"])\n            ) {\n              return null\n            }\n            return _vm.onArrowUp($event)\n          },\n          function($event) {\n            if (\n              !$event.type.indexOf("key") &&\n              _vm._k($event.keyCode, "enter", 13, $event.key, "Enter")\n            ) {\n              return null\n            }\n            return _vm.onEnter($event)\n          }\n        ],\n        change: function($event) {\n          return _vm.confirmValue(_vm.search)\n        },\n        blur: _vm.confirmBlur,\n        focus: _vm.confirmFocus\n      }\n    }),\n    _vm._v(" "),\n    _c(\n      "ul",\n      {\n        directives: [\n          {\n            name: "show",\n            rawName: "v-show",\n            value: _vm.isOpen,\n            expression: "isOpen"\n          }\n        ],\n        ref: "autocompleteResults",\n        staticClass: "autocomplete-results  form-control",\n        attrs: { id: "autocomplete-results" }\n      },\n      [\n        _vm.isLoading\n          ? _c("li", { staticClass: "loading" }, [\n              _vm._v("\\n      Loading results...\\n    ")\n            ])\n          : _vm._l(_vm.results, function(result, i) {\n              return _c(\n                "li",\n                {\n                  key: i,\n                  ref: "options",\n                  refInFor: true,\n                  staticClass: "autocomplete-items",\n                  class: { "is-active": i === _vm.arrowCounter },\n                  on: {\n                    click: function($event) {\n                      return _vm.setResult(result, i)\n                    }\n                  }\n                },\n                [\n                  result.hasOwnProperty(_vm.remotePrimaryValue)\n                    ? _c("div", [\n                        _vm._v(\n                          "\\n      " +\n                            _vm._s(result[_vm.remotePrimaryValue]) +\n                            "\\n      "\n                        )\n                      ])\n                    : _c("div", [\n                        _vm._v(\n                          "\\n        " +\n                            _vm._s(result[_vm.currentValue]) +\n                            "\\n      "\n                        )\n                      ])\n                ]\n              )\n            })\n      ],\n      2\n    ),\n    _vm._v(" "),\n    _c("input", {\n      directives: [\n        {\n          name: "model",\n          rawName: "v-model",\n          value: _vm.hiddenId,\n          expression: "hiddenId"\n        }\n      ],\n      attrs: { type: "hidden", name: "hiddenId" },\n      domProps: { value: _vm.hiddenId },\n      on: {\n        input: function($event) {\n          if ($event.target.composing) {\n            return\n          }\n          _vm.hiddenId = $event.target.value\n        }\n      }\n    })\n  ])\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\n\n// CONCATENATED MODULE: ./src/VueAutocompletion.vue?vue&type=template&id=78198a70&\n\n// CONCATENATED MODULE: ./node_modules/babel-loader/lib!./node_modules/vue-loader/lib??vue-loader-options!./src/VueAutocompletion.vue?vue&type=script&lang=js&\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n/* harmony default export */ var VueAutocompletionvue_type_script_lang_js_ = ({\n    name: \'vue-autocompletion\',\n    props: {\n        keyField: {\n            type: String,\n            default: \'id\'\n        },\n        valueField: {\n            type: String,\n            default: \'name\'\n        },\n        remoteKey: {\n            type: String,\n            default: \'\'\n        },\n        remoteValue: {\n            type: String,\n            default: \'\'\n        },\n        remotePrimaryValue: {\n\n            default: \'\'\n        },\n        remoteValueSelect: {\n            type: String,\n            default: \'\'\n        },\n        clazz: {\n            type: String,\n            default: ""\n        },\n        returnPromise: {\n            type: Boolean,\n            required: false,\n            default: false\n        },\n        validationErrors: { type: Array,\n            default: function () {\n                return [];\n            }\n        },\n        placeholder: {\n            type: String,\n            default: \'name\'\n        },\n\n        selected: {\n            type: Object,\n            required: true,\n            default: function () {\n                return {};\n            }\n        },\n        name: {\n            type: String,\n            default: \'search\'\n        },\n        searchLength: {\n            type: Number,\n            required: false,\n            default: 3\n        },\n        items: {\n            type: Array,\n            required: false,\n            default: function () {\n                return [];\n            }\n        },\n        isAsync: {\n            type: Boolean,\n            required: false,\n            default: false\n        }\n    },\n    computed: {\n        primaryValue: function () {\n            if (this.remotePrimaryValue) {\n                return this.remotePrimaryValue;\n            } else {\n                return this.remoteValue ? this.remoteValue : this.valueField;\n            }\n        },\n        currentValue: function () {\n            return this.remoteValue ? this.remoteValue : this.valueField;\n        },\n        currentKey: function () {\n            return this.remoteKey ? this.remoteKey : this.keyField;\n        },\n        errorClazz: function () {\n            return this.validationErrors.includes(this.name) ? \'is-invalid\' : \'\';\n        }\n\n    },\n\n    data: function () {\n        return {\n            isOpen: false,\n            results: [],\n            search: \'\',\n            found: \'\',\n            hiddenId: \'\',\n            isLoading: false,\n            resultSet: false,\n            arrowCounter: 0,\n            lastSearch: \'\',\n            searchChanged: false,\n            currentSelected: \'\'\n        };\n    },\n    methods: {\n        onChange: function () {\n            this.searchChanged = true;\n            if (this.currentSelected[this.valueField] != \'\' || this.currentSelected[this.keyField] != \'\') {\n                var aa = this.selected;\n                aa[this.valueField] = \'\';\n                aa[this.keyField] = \'\';\n                this.currentSelected = aa;\n\n                this.$emit(\'input\', aa);\n            }\n            if (this.search.length >= this.searchLength) {\n                this.$emit(\'key-press\', this.search);\n                if (this.isAsync) {\n                    this.isLoading = true;\n                } else {\n                    this.filterResults();\n                    this.isOpen = true;\n                }\n            }\n        },\n        filterResults: function () {\n            var rpv = this.remotePrimaryValue;\n            var sch = this.search;\n            var cv = this.currentValue;\n            this.results = this.items.filter(function (item) {\n                if (item && rpv != undefined && item.hasOwnProperty(rpv)) {\n                    return item[rpv].toLowerCase().indexOf(sch.toLowerCase()) > -1;\n                } else {\n                    return item[cv] && sch && item[cv].toLowerCase().indexOf(sch.toLowerCase()) > -1;\n                }\n            });\n        },\n        setResult: function (result, i) {\n            this.arrowCounter = i;\n            this.resultSet = true;\n            if (this.returnPromise) {\n                this.$emit(\'return-promise\', result);\n                var key = this.currentValue;\n                if (this.remotePrimaryValue) {\n                    key = result.hasOwnProperty(this.remotePrimaryValue) ? this.remotePrimaryValue : this.currentValue;\n                }\n                if (this.remoteValueSelect && result.hasOwnProperty(this.remoteValueSelect)) {\n                    key = this.remoteValueSelect;\n                }\n                this.found = result[key];\n                if (this.found.length > 0) {\n                    this.search = this.found;\n                    this.hiddenId = result[this.currentKey];\n                }\n                this.isOpen = false;\n            } else {\n                var key = this.currentValue;\n                if (this.remotePrimaryValue) {\n                    key = result.hasOwnProperty(this.remotePrimaryValue) ? this.remotePrimaryValue : this.currentValue;\n                }\n                if (this.remoteValueSelect && result.hasOwnProperty(this.remoteValueSelect)) {\n                    key = this.remoteValueSelect;\n                }\n                this.found = result[key];\n                if (this.found.length > 0) {\n                    this.search = this.found;\n                    this.hiddenId = result[this.currentKey];\n\n                    var aa = this.selected;\n                    aa[this.valueField] = this.search;\n                    aa[this.keyField] = this.hiddenId;\n                    this.$emit(\'input\', aa);\n\n                    this.$emit(\'search-value\', this.search);\n                    this.$emit(\'search-key\', this.hiddenId);\n                    this.isOpen = false;\n                } else {\n                    var aa = this.selected;\n                    aa[this.valueField] = \'\';\n                    aa[this.keyField] = \'\';\n                    this.$emit(\'input\', aa);\n\n                    this.$emit(\'search-value\', \'\');\n                    this.$emit(\'search-key\', \'\');\n                    this.isOpen = false;\n                }\n            }\n        },\n        confirmFocus: function (evt) {\n            this.resultSet = false;\n        },\n        /*\n        * race condition - need to ensure user selected auto complete\n        * appears to work and is triggered when open auto complete closes so as expected\n        */\n        confirmBlur: function (evt) {\n            setTimeout(function () {\n                if (this.found != this.search && this.searchChanged) {\n                    this.search = \'\';\n                    this.hiddenId = \'\';\n                }\n            }.bind(this), 180);\n        },\n\n        confirmValue: function (evt) {\n            var processSearch = true;\n            setTimeout(function () {\n                if (!this.resultSet) {\n                    for (var i = 0; i < this.results.length; i++) {\n                        if (this.results[i].hasOwnProperty(this.remotePrimaryValue)) {\n                            if (this.results[i][this.remotePrimaryValue].toLowerCase() === this.search.toLowerCase()) {\n                                this.isOpen = false;\n                                this.processSearch = false;\n                                this.setResult(this.results[i]);\n                            }\n                        } else {\n                            if (this.results[i][this.currentValue].toLowerCase() === this.search.toLowerCase()) {\n                                this.isOpen = false;\n                                this.processSearch = false;\n                                this.setResult(this.results[i]);\n                            }\n                        }\n                    }\n                    if (this.processSearch && (this.found.length === 0 || this.found.length > 0 && this.search != this.result)) {\n                        this.search = \'\';\n                        this.found = \'\';\n                    }\n                }\n            }.bind(this), 180);\n        },\n\n        onTab: function (evt) {\n            if (this.isOpen) {\n                if (this.results.length > 0) {\n                    var ix = 0;\n                    if (this.arrowCounter > -1) {\n                        ix = this.arrowCounter; // pick arrow selection otherwise first item\n                    }\n                    this.setResult(this.results[ix]);\n                }\n                this.isOpen = false;\n                this.processSearch = false;\n                this.arrowCounter = -1;\n            }\n        },\n        isFull: function () {\n            return this.found.length > 0;\n        },\n        onArrowDown: function (evt) {\n            if (this.arrowCounter < this.results.length - 1) {\n                this.arrowCounter = this.arrowCounter + 1;\n                this.fixScrolling();\n            }\n        },\n        onArrowUp: function () {\n            if (this.arrowCounter > 0) {\n                this.arrowCounter = this.arrowCounter - 1;\n                this.fixScrolling();\n            }\n        },\n        fixScrolling: function () {\n            const liH = this.$refs.options[this.arrowCounter].clientHeight;\n            this.$refs.autocompleteResults.scrollTop = liH * this.arrowCounter;\n        },\n        onEnter: function () {\n            this.setResult(this.results[this.arrowCounter]);\n            this.isOpen = false;\n            this.arrowCounter = -1;\n        },\n        handleClickOutside: function (evt) {\n            if (!this.$el.contains(evt.target)) {\n                this.isOpen = false;\n                this.arrowCounter = -1;\n            }\n        }\n    },\n    watch: {\n        selected: function (val, oldValue) {\n            if (val[this.valueField] != oldValue[this.valueField]) {\n                this.search = val[this.valueField];\n                this.hiddenId = val[this.keyField];\n                this.lastSearch = this.search;\n            }\n        },\n        items: function (val, oldValue) {\n            if (val.length !== oldValue.length) {\n                this.results = val;\n                this.isLoading = false;\n            }\n        }\n    },\n    created: function () {\n        this.currentSelected = this.selected;\n        if (this.selected && this.selected[this.valueField] && this.selected[this.keyField]) {\n            this.search = this.selected[this.valueField];\n            this.hiddenId = this.selected[this.keyField];\n            this.lastSearch = this.search;\n        }\n    },\n    mounted: function () {\n        document.addEventListener(\'click\', this.handleClickOutside);\n        if (this.selected && this.selected[this.valueField] && this.selected[this.keyField]) {\n            this.search = this.selected[this.valueField];\n            this.hiddenId = this.selected[this.keyField];\n            this.lastSearch = this.search;\n        }\n    },\n    destroyed: function () {\n        document.removeEventListener(\'click\', this.handleClickOutside);\n    }\n});\n// CONCATENATED MODULE: ./src/VueAutocompletion.vue?vue&type=script&lang=js&\n /* harmony default export */ var src_VueAutocompletionvue_type_script_lang_js_ = (VueAutocompletionvue_type_script_lang_js_); \n// EXTERNAL MODULE: ./src/vue-autocompletion.css?vue&type=style&index=0&lang=css&\nvar vue_autocompletionvue_type_style_index_0_lang_css_ = __webpack_require__(1);\n\n// CONCATENATED MODULE: ./node_modules/vue-loader/lib/runtime/componentNormalizer.js\n/* globals __VUE_SSR_CONTEXT__ */\n\n// IMPORTANT: Do NOT use ES2015 features in this file (except for modules).\n// This module is a runtime utility for cleaner component module output and will\n// be included in the final webpack user bundle.\n\nfunction normalizeComponent (\n  scriptExports,\n  render,\n  staticRenderFns,\n  functionalTemplate,\n  injectStyles,\n  scopeId,\n  moduleIdentifier, /* server only */\n  shadowMode /* vue-cli only */\n) {\n  // Vue.extend constructor export interop\n  var options = typeof scriptExports === \'function\'\n    ? scriptExports.options\n    : scriptExports\n\n  // render functions\n  if (render) {\n    options.render = render\n    options.staticRenderFns = staticRenderFns\n    options._compiled = true\n  }\n\n  // functional template\n  if (functionalTemplate) {\n    options.functional = true\n  }\n\n  // scopedId\n  if (scopeId) {\n    options._scopeId = \'data-v-\' + scopeId\n  }\n\n  var hook\n  if (moduleIdentifier) { // server build\n    hook = function (context) {\n      // 2.3 injection\n      context =\n        context || // cached call\n        (this.$vnode && this.$vnode.ssrContext) || // stateful\n        (this.parent && this.parent.$vnode && this.parent.$vnode.ssrContext) // functional\n      // 2.2 with runInNewContext: true\n      if (!context && typeof __VUE_SSR_CONTEXT__ !== \'undefined\') {\n        context = __VUE_SSR_CONTEXT__\n      }\n      // inject component styles\n      if (injectStyles) {\n        injectStyles.call(this, context)\n      }\n      // register component module identifier for async chunk inferrence\n      if (context && context._registeredComponents) {\n        context._registeredComponents.add(moduleIdentifier)\n      }\n    }\n    // used by ssr in case component is cached and beforeCreate\n    // never gets called\n    options._ssrRegister = hook\n  } else if (injectStyles) {\n    hook = shadowMode\n      ? function () { injectStyles.call(this, this.$root.$options.shadowRoot) }\n      : injectStyles\n  }\n\n  if (hook) {\n    if (options.functional) {\n      // for template-only hot-reload because in that case the render fn doesn\'t\n      // go through the normalizer\n      options._injectStyles = hook\n      // register for functioal component in vue file\n      var originalRender = options.render\n      options.render = function renderWithStyleInjection (h, context) {\n        hook.call(context)\n        return originalRender(h, context)\n      }\n    } else {\n      // inject component registration as beforeCreate hook\n      var existing = options.beforeCreate\n      options.beforeCreate = existing\n        ? [].concat(existing, hook)\n        : [hook]\n    }\n  }\n\n  return {\n    exports: scriptExports,\n    options: options\n  }\n}\n\n// CONCATENATED MODULE: ./src/VueAutocompletion.vue\n\n\n\n\n\n\n/* normalize component */\n\nvar component = normalizeComponent(\n  src_VueAutocompletionvue_type_script_lang_js_,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (false) { var api; }\ncomponent.options.__file = "src/VueAutocompletion.vue"\n/* harmony default export */ var VueAutocompletion = (component.exports);\n// CONCATENATED MODULE: ./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/vue-loader/lib??vue-loader-options!./src/VuAutocompletionValid.vue?vue&type=template&id=13d798ee&\nvar VuAutocompletionValidvue_type_template_id_13d798ee_render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c("span", { staticClass: "autocomplete " }, [\n    _c("input", {\n      directives: [\n        {\n          name: "validate",\n          rawName: "v-validate",\n          value: _vm.validation,\n          expression: "validation"\n        },\n        {\n          name: "model",\n          rawName: "v-model",\n          value: _vm.search,\n          expression: "search"\n        }\n      ],\n      staticClass: "form-control",\n      class: [_vm.clazz, _vm.errorClazz],\n      attrs: {\n        type: "search",\n        name: _vm.name,\n        autocomplete: _vm.name,\n        placeholder: _vm.placeholder\n      },\n      domProps: { value: _vm.search },\n      on: {\n        input: [\n          function($event) {\n            if ($event.target.composing) {\n              return\n            }\n            _vm.search = $event.target.value\n          },\n          _vm.onChange\n        ],\n        keydown: [\n          function($event) {\n            if (\n              !$event.type.indexOf("key") &&\n              _vm._k($event.keyCode, "down", 40, $event.key, [\n                "Down",\n                "ArrowDown"\n              ])\n            ) {\n              return null\n            }\n            return _vm.onArrowDown($event)\n          },\n          function($event) {\n            if (\n              !$event.type.indexOf("key") &&\n              _vm._k($event.keyCode, "tab", 9, $event.key, "Tab")\n            ) {\n              return null\n            }\n            return _vm.onTab($event)\n          },\n          function($event) {\n            if (\n              !$event.type.indexOf("key") &&\n              _vm._k($event.keyCode, "up", 38, $event.key, ["Up", "ArrowUp"])\n            ) {\n              return null\n            }\n            return _vm.onArrowUp($event)\n          },\n          function($event) {\n            if (\n              !$event.type.indexOf("key") &&\n              _vm._k($event.keyCode, "enter", 13, $event.key, "Enter")\n            ) {\n              return null\n            }\n            return _vm.onEnter($event)\n          }\n        ],\n        change: function($event) {\n          return _vm.confirmValue(_vm.search)\n        },\n        blur: _vm.confirmBlur,\n        focus: _vm.confirmFocus\n      }\n    }),\n    _vm._v(" "),\n    _vm.errors && _vm.errors.has(_vm.name)\n      ? _c("div", { staticClass: "col-sm-12 alert alert-danger" }, [\n          _vm._v(_vm._s(_vm.errors.first(_vm.name)))\n        ])\n      : _vm._e(),\n    _vm._v(" "),\n    _c(\n      "ul",\n      {\n        directives: [\n          {\n            name: "show",\n            rawName: "v-show",\n            value: _vm.isOpen,\n            expression: "isOpen"\n          }\n        ],\n        ref: "autocompleteResults",\n        staticClass: "autocomplete-results  form-control",\n        attrs: { id: "autocomplete-results" }\n      },\n      [\n        _vm.isLoading\n          ? _c("li", { staticClass: "loading" }, [\n              _vm._v("\\n       Loading results...\\n     ")\n            ])\n          : _vm._l(_vm.results, function(result, i) {\n              return _c(\n                "li",\n                {\n                  key: i,\n                  ref: "options",\n                  refInFor: true,\n                  staticClass: "autocomplete-items",\n                  class: { "is-active": i === _vm.arrowCounter },\n                  on: {\n                    click: function($event) {\n                      return _vm.setResult(result, i)\n                    }\n                  }\n                },\n                [\n                  result.hasOwnProperty(_vm.remotePrimaryValue)\n                    ? _c("div", [\n                        _vm._v(\n                          "\\n       " +\n                            _vm._s(result[_vm.remotePrimaryValue]) +\n                            "\\n       "\n                        )\n                      ])\n                    : _c("div", [\n                        _vm._v(\n                          "\\n         " +\n                            _vm._s(result[_vm.currentValue]) +\n                            "\\n       "\n                        )\n                      ])\n                ]\n              )\n            })\n      ],\n      2\n    ),\n    _vm._v(" "),\n    _c("input", {\n      directives: [\n        {\n          name: "validate",\n          rawName: "v-validate",\n          value:\n            _vm.validation && _vm.validation.toString().includes("required")\n              ? "required"\n              : "",\n          expression:\n            "validation && validation.toString().includes(\'required\') ? \'required\' : \'\'"\n        },\n        {\n          name: "model",\n          rawName: "v-model",\n          value: _vm.hiddenId,\n          expression: "hiddenId"\n        }\n      ],\n      attrs: { type: "hidden", name: "hiddenId" },\n      domProps: { value: _vm.hiddenId },\n      on: {\n        input: function($event) {\n          if ($event.target.composing) {\n            return\n          }\n          _vm.hiddenId = $event.target.value\n        }\n      }\n    })\n  ])\n}\nvar VuAutocompletionValidvue_type_template_id_13d798ee_staticRenderFns = []\nVuAutocompletionValidvue_type_template_id_13d798ee_render._withStripped = true\n\n\n// CONCATENATED MODULE: ./src/VuAutocompletionValid.vue?vue&type=template&id=13d798ee&\n\n// CONCATENATED MODULE: ./node_modules/babel-loader/lib!./node_modules/vue-loader/lib??vue-loader-options!./src/VuAutocompletionValid.vue?vue&type=script&lang=js&\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n/* harmony default export */ var VuAutocompletionValidvue_type_script_lang_js_ = ({\n  name: \'vue-autocompletion-valid\',\n  inject: ["$validator"],\n  props: {\n    keyField: {\n      type: String,\n      default: \'id\'\n    },\n    valueField: {\n      type: String,\n      default: \'name\'\n    },\n    remoteKey: {\n      type: String,\n      default: \'\'\n    },\n    remoteValue: {\n      type: String,\n      default: \'\'\n    },\n    remotePrimaryValue: {\n\n      default: \'\'\n    },\n    remoteValueSelect: {\n      type: String,\n      default: \'\'\n    },\n    clazz: {\n      type: String,\n      default: ""\n    },\n    returnPromise: {\n      type: Boolean,\n      required: false,\n      default: false\n    },\n    validationErrors: { type: Array,\n      default: function () {\n        return [];\n      }\n    },\n    placeholder: {\n      type: String,\n      default: \'name\'\n    },\n    validation: {\n      type: String,\n      required: false,\n      default: ""\n    },\n    selected: {\n      type: Object,\n      required: true,\n      default: function () {\n        return {};\n      }\n    },\n    name: {\n      type: String,\n      default: \'search\'\n    },\n    searchLength: {\n      type: Number,\n      required: false,\n      default: 3\n    },\n    items: {\n      type: Array,\n      required: false,\n      default: function () {\n        return [];\n      }\n    },\n    isAsync: {\n      type: Boolean,\n      required: false,\n      default: false\n    }\n  },\n  computed: {\n    primaryValue: function () {\n      if (this.remotePrimaryValue) {\n        return this.remotePrimaryValue;\n      } else {\n        return this.remoteValue ? this.remoteValue : this.valueField;\n      }\n    },\n    currentValue: function () {\n      return this.remoteValue ? this.remoteValue : this.valueField;\n    },\n    currentKey: function () {\n      return this.remoteKey ? this.remoteKey : this.keyField;\n    },\n    errorClazz: function () {\n      return this.errors && this.errors.has(this.name) || this.validationErrors.includes(this.name) ? \'is-invalid\' : \'\';\n    }\n\n  },\n\n  data: function () {\n    return {\n      isOpen: false,\n      results: [],\n      search: \'\',\n      found: \'\',\n      hiddenId: \'\',\n      isLoading: false,\n      resultSet: false,\n      arrowCounter: 0,\n      lastSearch: \'\',\n      searchChanged: false,\n      currentSelected: \'\'\n    };\n  },\n  methods: {\n    onChange: function () {\n      this.searchChanged = true;\n      if (this.currentSelected[this.valueField] != \'\' || this.currentSelected[this.keyField] != \'\') {\n        var aa = this.selected;\n        aa[this.valueField] = \'\';\n        aa[this.keyField] = \'\';\n        this.currentSelected = aa;\n\n        this.$emit(\'input\', aa);\n      }\n      if (this.search.length >= this.searchLength) {\n        this.$emit(\'key-press\', this.search);\n        if (this.isAsync) {\n          this.isLoading = true;\n        } else {\n          this.filterResults();\n          this.isOpen = true;\n        }\n      }\n    },\n    filterResults: function () {\n      var rpv = this.remotePrimaryValue;\n      var sch = this.search;\n      var cv = this.currentValue;\n      this.results = this.items.filter(function (item) {\n        if (item && rpv != undefined && item.hasOwnProperty(rpv)) {\n          return item[rpv].toLowerCase().indexOf(sch.toLowerCase()) > -1;\n        } else {\n          return item[cv] && sch && item[cv].toLowerCase().indexOf(sch.toLowerCase()) > -1;\n        }\n      });\n    },\n    setResult: function (result, i) {\n      this.arrowCounter = i;\n      this.resultSet = true;\n      if (this.returnPromise) {\n        this.$emit(\'return-promise\', result);\n        var key = this.currentValue;\n        if (this.remotePrimaryValue) {\n          key = result.hasOwnProperty(this.remotePrimaryValue) ? this.remotePrimaryValue : this.currentValue;\n        }\n        if (this.remoteValueSelect && result.hasOwnProperty(this.remoteValueSelect)) {\n          key = this.remoteValueSelect;\n        }\n        this.found = result[key];\n        if (this.found.length > 0) {\n          this.search = this.found;\n          this.hiddenId = result[this.currentKey];\n        }\n        this.isOpen = false;\n      } else {\n        var key = this.currentValue;\n        if (this.remotePrimaryValue) {\n          key = result.hasOwnProperty(this.remotePrimaryValue) ? this.remotePrimaryValue : this.currentValue;\n        }\n        if (this.remoteValueSelect && result.hasOwnProperty(this.remoteValueSelect)) {\n          key = this.remoteValueSelect;\n        }\n        this.found = result[key];\n        if (this.found.length > 0) {\n          this.search = this.found;\n          this.hiddenId = result[this.currentKey];\n\n          var aa = this.selected;\n          aa[this.valueField] = this.search;\n          aa[this.keyField] = this.hiddenId;\n          this.$emit(\'input\', aa);\n\n          this.$emit(\'search-value\', this.search);\n          this.$emit(\'search-key\', this.hiddenId);\n          this.isOpen = false;\n        } else {\n          var aa = this.selected;\n          aa[this.valueField] = \'\';\n          aa[this.keyField] = \'\';\n          this.$emit(\'input\', aa);\n\n          this.$emit(\'search-value\', \'\');\n          this.$emit(\'search-key\', \'\');\n          this.isOpen = false;\n        }\n      }\n    },\n    confirmFocus: function (evt) {\n      this.resultSet = false;\n    },\n    /*\n    * race condition - need to ensure user selected auto complete\n    * appears to work and is triggered when open auto complete closes so as expected\n    */\n    confirmBlur: function (evt) {\n      setTimeout(function () {\n        if (this.found != this.search && this.searchChanged) {\n          this.search = \'\';\n          this.hiddenId = \'\';\n        }\n      }.bind(this), 180);\n    },\n\n    confirmValue: function (evt) {\n      var processSearch = true;\n      setTimeout(function () {\n        if (!this.resultSet) {\n          for (var i = 0; i < this.results.length; i++) {\n            if (this.results[i].hasOwnProperty(this.remotePrimaryValue)) {\n              if (this.results[i][this.remotePrimaryValue].toLowerCase() === this.search.toLowerCase()) {\n                this.isOpen = false;\n                this.processSearch = false;\n                this.setResult(this.results[i]);\n              }\n            } else {\n              if (this.results[i][this.currentValue].toLowerCase() === this.search.toLowerCase()) {\n                this.isOpen = false;\n                this.processSearch = false;\n                this.setResult(this.results[i]);\n              }\n            }\n          }\n          if (this.processSearch && (this.found.length === 0 || this.found.length > 0 && this.search != this.result)) {\n            this.search = \'\';\n            this.found = \'\';\n          }\n        }\n      }.bind(this), 180);\n    },\n\n    onTab: function (evt) {\n      if (this.isOpen) {\n        if (this.results.length > 0) {\n          var ix = 0;\n          if (this.arrowCounter > -1) {\n            ix = this.arrowCounter; // pick arrow selection otherwise first item\n          }\n          this.setResult(this.results[ix]);\n        }\n        this.isOpen = false;\n        this.processSearch = false;\n        this.arrowCounter = -1;\n      }\n    },\n    isFull: function () {\n      return this.found.length > 0;\n    },\n    onArrowDown: function (evt) {\n      if (this.arrowCounter < this.results.length - 1) {\n        this.arrowCounter = this.arrowCounter + 1;\n        this.fixScrolling();\n      }\n    },\n    onArrowUp: function () {\n      if (this.arrowCounter > 0) {\n        this.arrowCounter = this.arrowCounter - 1;\n        this.fixScrolling();\n      }\n    },\n    fixScrolling: function () {\n      const liH = this.$refs.options[this.arrowCounter].clientHeight;\n      this.$refs.autocompleteResults.scrollTop = liH * this.arrowCounter;\n    },\n    onEnter: function () {\n      this.setResult(this.results[this.arrowCounter]);\n      this.isOpen = false;\n      this.arrowCounter = -1;\n    },\n    handleClickOutside: function (evt) {\n      if (!this.$el.contains(evt.target)) {\n        this.isOpen = false;\n        this.arrowCounter = -1;\n      }\n    }\n  },\n  watch: {\n    selected: function (val, oldValue) {\n      if (val[this.valueField] != oldValue[this.valueField]) {\n        this.search = val[this.valueField];\n        this.hiddenId = val[this.keyField];\n        this.lastSearch = this.search;\n      }\n    },\n    items: function (val, oldValue) {\n      if (val.length !== oldValue.length) {\n        this.results = val;\n        this.isLoading = false;\n      }\n    }\n  },\n  created: function () {\n    this.currentSelected = this.selected;\n    if (this.selected && this.selected[this.valueField] && this.selected[this.keyField]) {\n      this.search = this.selected[this.valueField];\n      this.hiddenId = this.selected[this.keyField];\n      this.lastSearch = this.search;\n    }\n  },\n  mounted: function () {\n    document.addEventListener(\'click\', this.handleClickOutside);\n    if (this.selected && this.selected[this.valueField] && this.selected[this.keyField]) {\n      this.search = this.selected[this.valueField];\n      this.hiddenId = this.selected[this.keyField];\n      this.lastSearch = this.search;\n    }\n  },\n  destroyed: function () {\n    document.removeEventListener(\'click\', this.handleClickOutside);\n  }\n});\n// CONCATENATED MODULE: ./src/VuAutocompletionValid.vue?vue&type=script&lang=js&\n /* harmony default export */ var src_VuAutocompletionValidvue_type_script_lang_js_ = (VuAutocompletionValidvue_type_script_lang_js_); \n// CONCATENATED MODULE: ./src/VuAutocompletionValid.vue\n\n\n\n\n\n\n/* normalize component */\n\nvar VuAutocompletionValid_component = normalizeComponent(\n  src_VuAutocompletionValidvue_type_script_lang_js_,\n  VuAutocompletionValidvue_type_template_id_13d798ee_render,\n  VuAutocompletionValidvue_type_template_id_13d798ee_staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (false) { var VuAutocompletionValid_api; }\nVuAutocompletionValid_component.options.__file = "src/VuAutocompletionValid.vue"\n/* harmony default export */ var VuAutocompletionValid = (VuAutocompletionValid_component.exports);\n// CONCATENATED MODULE: ./src/main.js\n/* concated harmony reexport VueAutocompletion */__webpack_require__.d(__webpack_exports__, "VueAutocompletion", function() { return VueAutocompletion; });\n/* concated harmony reexport VuAutocompletionValid */__webpack_require__.d(__webpack_exports__, "VuAutocompletionValid", function() { return VuAutocompletionValid; });\n\n\nwindow.VueAutocompletion = VueAutocompletion;\nwindow.VuAutocompletionValid = VuAutocompletionValid;\n/*export default {\n    install:function(Vue) {\n        Vue.component(VueAutocompletion);\n        Vue.component(VuAutocompletionValid);\n    }\n};\n*/\n/* harmony default export */ var main = __webpack_exports__["default"] = (VueAutocompletion);\n\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvVnVlQXV0b2NvbXBsZXRpb24udnVlP2U2MTIiLCJ3ZWJwYWNrOi8vL3NyYy9WdWVBdXRvY29tcGxldGlvbi52dWU/OTIxOCIsIndlYnBhY2s6Ly8vLi9zcmMvVnVlQXV0b2NvbXBsZXRpb24udnVlP2E1MTIiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3J1bnRpbWUvY29tcG9uZW50Tm9ybWFsaXplci5qcz8yODc3Iiwid2VicGFjazovLy8uL3NyYy9WdWVBdXRvY29tcGxldGlvbi52dWU/NDY1NyIsIndlYnBhY2s6Ly8vLi9zcmMvVnVBdXRvY29tcGxldGlvblZhbGlkLnZ1ZT8zODU3Iiwid2VicGFjazovLy9zcmMvVnVBdXRvY29tcGxldGlvblZhbGlkLnZ1ZT9iNTVmIiwid2VicGFjazovLy8uL3NyYy9WdUF1dG9jb21wbGV0aW9uVmFsaWQudnVlPzhjOGQiLCJ3ZWJwYWNrOi8vLy4vc3JjL1Z1QXV0b2NvbXBsZXRpb25WYWxpZC52dWU/ZjRiMiIsIndlYnBhY2s6Ly8vLi9zcmMvbWFpbi5qcz81NmQ3Il0sIm5hbWVzIjpbIndpbmRvdyIsIlZ1ZUF1dG9jb21wbGV0aW9uIiwiVnVBdXRvY29tcGxldGlvblZhbGlkIl0sIm1hcHBpbmdzIjoiOzs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQiwrQkFBK0I7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsaUJBQWlCLG9CQUFvQjtBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtB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bnRlbnQiOlsidmFyIHJlbmRlciA9IGZ1bmN0aW9uKCkge1xuICB2YXIgX3ZtID0gdGhpc1xuICB2YXIgX2ggPSBfdm0uJGNyZWF0ZUVsZW1lbnRcbiAgdmFyIF9jID0gX3ZtLl9zZWxmLl9jIHx8IF9oXG4gIHJldHVybiBfYyhcInNwYW5cIiwgeyBzdGF0aWNDbGFzczogXCJhdXRvY29tcGxldGUgXCIgfSwgW1xuICAgIF9jKFwiaW5wdXRcIiwge1xuICAgICAgZGlyZWN0aXZlczogW1xuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogXCJtb2RlbFwiLFxuICAgICAgICAgIHJhd05hbWU6IFwidi1tb2RlbFwiLFxuICAgICAgICAgIHZhbHVlOiBfdm0uc2VhcmNoLFxuICAgICAgICAgIGV4cHJlc3Npb246IFwic2VhcmNoXCJcbiAgICAgICAgfVxuICAgICAgXSxcbiAgICAgIHN0YXRpY0NsYXNzOiBcImZvcm0tY29udHJvbFwiLFxuICAgICAgY2xhc3M6IFtfdm0uY2xhenosIF92bS5lcnJvckNsYXp6XSxcbiAgICAgIGF0dHJzOiB7XG4gICAgICAgIHR5cGU6IFwic2VhcmNoXCIsXG4gICAgICAgIG5hbWU6IF92bS5uYW1lLFxuICAgICAgICBhdXRvY29tcGxldGU6IF92bS5uYW1lLFxuICAgICAgICBwbGFjZWhvbGRlcjogX3ZtLnBsYWNlaG9sZGVyXG4gICAgICB9LFxuICAgICAgZG9tUHJvcHM6IHsgdmFsdWU6IF92bS5zZWFyY2ggfSxcbiAgICAgIG9uOiB7XG4gICAgICAgIGlucHV0OiBbXG4gICAgICAgICAgZnVuY3Rpb24oJGV2ZW50KSB7XG4gICAgICAgICAgICBpZiAoJGV2ZW50LnRhcmdldC5jb21wb3NpbmcpIHtcbiAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBfdm0uc2VhcmNoID0gJGV2ZW50LnRhcmdldC52YWx1ZVxuICAgICAgICAgIH0sXG4gICAgICAgICAgX3ZtLm9uQ2hhbmdlXG4gICAgICAgIF0sXG4gICAgICAgIGtleWRvd246IFtcbiAgICAgICAgICBmdW5jdGlvbigkZXZlbnQpIHtcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgISRldmVudC50eXBlLmluZGV4T2YoXCJrZXlcIikgJiZcbiAgICAgICAgICAgICAgX3ZtLl9rKCRldmVudC5rZXlDb2RlLCBcImRvd25cIiwgNDAsICRldmVudC5rZXksIFtcbiAgICAgICAgICAgICAgICBcIkRvd25cIixcbiAgICAgICAgICAgICAgICBcIkFycm93RG93blwiXG4gICAgICAgICAgICAgIF0pXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgcmV0dXJuIG51bGxcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBfdm0ub25BcnJvd0Rvd24oJGV2ZW50KVxuICAgICAgICAgIH0sXG4gICAgICAgICAgZnVuY3Rpb24oJGV2ZW50KSB7XG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICEkZXZlbnQudHlwZS5pbmRleE9mKFwia2V5XCIpICYmXG4gICAgICAgICAgICAgIF92bS5faygkZXZlbnQua2V5Q29kZSwgXCJ0YWJcIiwgOSwgJGV2ZW50LmtleSwgXCJUYWJcIilcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICByZXR1cm4gbnVsbFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIF92bS5vblRhYigkZXZlbnQpXG4gICAgICAgICAgfSxcbiAgICAgICAgICBmdW5jdGlvbigkZXZlbnQpIHtcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgISRldmVudC50eXBlLmluZGV4T2YoXCJrZXlcIikgJiZcbiAgICAgICAgICAgICAgX3ZtLl9rKCRldmVudC5rZXlDb2RlLCBcInVwXCIsIDM4LCAkZXZlbnQua2V5LCBbXCJVcFwiLCBcIkFycm93VXBcIl0pXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgcmV0dXJuIG51bGxcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBfdm0ub25BcnJvd1VwKCRldmVudClcbiAgICAgICAgICB9LFxuICAgICAgICAgIGZ1bmN0aW9uKCRldmVudCkge1xuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAhJGV2ZW50LnR5cGUuaW5kZXhPZihcImtleVwiKSAmJlxuICAgICAgICAgICAgICBfdm0uX2soJGV2ZW50LmtleUNvZGUsIFwiZW50ZXJcIiwgMTMsICRldmVudC5rZXksIFwiRW50ZXJcIilcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICByZXR1cm4gbnVsbFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIF92bS5vbkVudGVyKCRldmVudClcbiAgICAgICAgICB9XG4gICAgICAgIF0sXG4gICAgICAgIGNoYW5nZTogZnVuY3Rpb24oJGV2ZW50KSB7XG4gICAgICAgICAgcmV0dXJuIF92bS5jb25maXJtVmFsdWUoX3ZtLnNlYXJjaClcbiAgICAgICAgfSxcbiAgICAgICAgYmx1cjogX3ZtLmNvbmZpcm1CbHVyLFxuICAgICAgICBmb2N1czogX3ZtLmNvbmZpcm1Gb2N1c1xuICAgICAgfVxuICAgIH0pLFxuICAgIF92bS5fdihcIiBcIiksXG4gICAgX2MoXG4gICAgICBcInVsXCIsXG4gICAgICB7XG4gICAgICAgIGRpcmVjdGl2ZXM6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBuYW1lOiBcInNob3dcIixcbiAgICAgICAgICAgIHJhd05hbWU6IFwidi1zaG93XCIsXG4gICAgICAgICAgICB2YWx1ZTogX3ZtLmlzT3BlbixcbiAgICAgICAgICAgIGV4cHJlc3Npb246IFwiaXNPcGVuXCJcbiAgICAgICAgICB9XG4gICAgICAgIF0sXG4gICAgICAgIHJlZjogXCJhdXRvY29tcGxldGVSZXN1bHRzXCIsXG4gICAgICAgIHN0YXRpY0NsYXNzOiBcImF1dG9jb21wbGV0ZS1yZXN1bHRzICBmb3JtLWNvbnRyb2xcIixcbiAgICAgICAgYXR0cnM6IHsgaWQ6IFwiYXV0b2NvbXBsZXRlLXJlc3VsdHNcIiB9XG4gICAgICB9LFxuICAgICAgW1xuICAgICAgICBfdm0uaXNMb2FkaW5nXG4gICAgICAgICAgPyBfYyhcImxpXCIsIHsgc3RhdGljQ2xhc3M6IFwibG9hZGluZ1wiIH0sIFtcbiAgICAgICAgICAgICAgX3ZtLl92KFwiXFxuICAgICAgTG9hZGluZyByZXN1bHRzLi4uXFxuICAgIFwiKVxuICAgICAgICAgICAgXSlcbiAgICAgICAgICA6IF92bS5fbChfdm0ucmVzdWx0cywgZnVuY3Rpb24ocmVzdWx0LCBpKSB7XG4gICAgICAgICAgICAgIHJldHVybiBfYyhcbiAgICAgICAgICAgICAgICBcImxpXCIsXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAga2V5OiBpLFxuICAgICAgICAgICAgICAgICAgcmVmOiBcIm9wdGlvbnNcIixcbiAgICAgICAgICAgICAgICAgIHJlZkluRm9yOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgc3RhdGljQ2xhc3M6IFwiYXV0b2NvbXBsZXRlLWl0ZW1zXCIsXG4gICAgICAgICAgICAgICAgICBjbGFzczogeyBcImlzLWFjdGl2ZVwiOiBpID09PSBfdm0uYXJyb3dDb3VudGVyIH0sXG4gICAgICAgICAgICAgICAgICBvbjoge1xuICAgICAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24oJGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5zZXRSZXN1bHQocmVzdWx0LCBpKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgICByZXN1bHQuaGFzT3duUHJvcGVydHkoX3ZtLnJlbW90ZVByaW1hcnlWYWx1ZSlcbiAgICAgICAgICAgICAgICAgICAgPyBfYyhcImRpdlwiLCBbXG4gICAgICAgICAgICAgICAgICAgICAgICBfdm0uX3YoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIFwiXFxuICAgICAgXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF92bS5fcyhyZXN1bHRbX3ZtLnJlbW90ZVByaW1hcnlWYWx1ZV0pICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIlxcbiAgICAgIFwiXG4gICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgXSlcbiAgICAgICAgICAgICAgICAgICAgOiBfYyhcImRpdlwiLCBbXG4gICAgICAgICAgICAgICAgICAgICAgICBfdm0uX3YoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIFwiXFxuICAgICAgICBcIiArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3ZtLl9zKHJlc3VsdFtfdm0uY3VycmVudFZhbHVlXSkgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiXFxuICAgICAgXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICBdKVxuICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgfSlcbiAgICAgIF0sXG4gICAgICAyXG4gICAgKSxcbiAgICBfdm0uX3YoXCIgXCIpLFxuICAgIF9jKFwiaW5wdXRcIiwge1xuICAgICAgZGlyZWN0aXZlczogW1xuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogXCJtb2RlbFwiLFxuICAgICAgICAgIHJhd05hbWU6IFwidi1tb2RlbFwiLFxuICAgICAgICAgIHZhbHVlOiBfdm0uaGlkZGVuSWQsXG4gICAgICAgICAgZXhwcmVzc2lvbjogXCJoaWRkZW5JZFwiXG4gICAgICAgIH1cbiAgICAgIF0sXG4gICAgICBhdHRyczogeyB0eXBlOiBcImhpZGRlblwiLCBuYW1lOiBcImhpZGRlbklkXCIgfSxcbiAgICAgIGRvbVByb3BzOiB7IHZhbHVlOiBfdm0uaGlkZGVuSWQgfSxcbiAgICAgIG9uOiB7XG4gICAgICAgIGlucHV0OiBmdW5jdGlvbigkZXZlbnQpIHtcbiAgICAgICAgICBpZiAoJGV2ZW50LnRhcmdldC5jb21wb3NpbmcpIHtcbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgIH1cbiAgICAgICAgICBfdm0uaGlkZGVuSWQgPSAkZXZlbnQudGFyZ2V0LnZhbHVlXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KVxuICBdKVxufVxudmFyIHN0YXRpY1JlbmRlckZucyA9IFtdXG5yZW5kZXIuX3dpdGhTdHJpcHBlZCA9IHRydWVcblxuZXhwb3J0IHsgcmVuZGVyLCBzdGF0aWNSZW5kZXJGbnMgfSIsIjx0ZW1wbGF0ZT5cbiAgPHNwYW4gY2xhc3M9XCJhdXRvY29tcGxldGUgXCI+XG4gICAgPGlucHV0IHR5cGU9XCJzZWFyY2hcIiA6bmFtZT1cIm5hbWVcIiBAaW5wdXQ9XCJvbkNoYW5nZVwiICA6YXV0b2NvbXBsZXRlPVwibmFtZVwiXG4gICAgICAgICAgIHYtbW9kZWw9XCJzZWFyY2hcIiA6cGxhY2Vob2xkZXI9XCJwbGFjZWhvbGRlclwiIEBrZXlkb3duLmRvd249XCJvbkFycm93RG93blwiIEBjaGFuZ2U9XCJjb25maXJtVmFsdWUoc2VhcmNoKVwiXG4gICAgICAgICAgIEBrZXlkb3duLnRhYj1cIm9uVGFiXCIgQGtleWRvd24udXA9XCJvbkFycm93VXBcIiBAa2V5ZG93bi5lbnRlcj1cIm9uRW50ZXJcIiBAYmx1cj1cImNvbmZpcm1CbHVyXCIgQGZvY3VzPVwiY29uZmlybUZvY3VzXCJcbiAgICAgICAgICAgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIlxuICAgICAgICAgICA6Y2xhc3M9XCJbY2xhenosZXJyb3JDbGF6el1cIlxuICAgIC8+XG5cbiAgICA8dWwgaWQ9XCJhdXRvY29tcGxldGUtcmVzdWx0c1wiIHYtc2hvdz1cImlzT3BlblwiICByZWY9XCJhdXRvY29tcGxldGVSZXN1bHRzXCIgY2xhc3M9XCJhdXRvY29tcGxldGUtcmVzdWx0cyAgZm9ybS1jb250cm9sXCI+XG4gICAgICA8bGkgY2xhc3M9XCJsb2FkaW5nXCIgdi1pZj1cImlzTG9hZGluZ1wiPlxuICAgICAgICBMb2FkaW5nIHJlc3VsdHMuLi5cbiAgICAgIDwvbGk+XG4gICAgICA8bGkgdi1lbHNlIHYtZm9yPVwiKHJlc3VsdCwgaSkgaW4gcmVzdWx0c1wiIDprZXk9XCJpXCIgIHJlZj1cIm9wdGlvbnNcIiAgQGNsaWNrPVwic2V0UmVzdWx0KHJlc3VsdCxpKVwiIGNsYXNzPVwiYXV0b2NvbXBsZXRlLWl0ZW1zXCJcbiAgICAgICAgICA6Y2xhc3M9XCJ7ICdpcy1hY3RpdmUnOiBpID09PSBhcnJvd0NvdW50ZXIgfVwiPlxuICAgICAgICA8ZGl2IHYtaWY9XCJyZXN1bHQuaGFzT3duUHJvcGVydHkocmVtb3RlUHJpbWFyeVZhbHVlKVwiPlxuICAgICAgICB7eyByZXN1bHRbcmVtb3RlUHJpbWFyeVZhbHVlXSB9fVxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiB2LWVsc2U+XG4gICAgICAgICAge3sgcmVzdWx0W2N1cnJlbnRWYWx1ZV0gfX1cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2xpPlxuICAgIDwvdWw+XG4gICAgPGlucHV0IHR5cGU9XCJoaWRkZW5cIiBuYW1lPVwiaGlkZGVuSWRcIiB2LW1vZGVsPVwiaGlkZGVuSWRcIi8+XG4gIDwvc3Bhbj5cbjwvdGVtcGxhdGU+XG48c2NyaXB0PlxuICAgIGV4cG9ydCBkZWZhdWx0IHtcbiAgICAgIG5hbWU6ICd2dWUtYXV0b2NvbXBsZXRpb24nLFxuICAgICAgICBwcm9wczp7XG4gICAgICAgICAga2V5RmllbGQ6IHtcbiAgICAgICAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgICAgICAgIGRlZmF1bHQ6ICdpZCdcbiAgICAgICAgICB9LFxuICAgICAgICAgIHZhbHVlRmllbGQ6IHtcbiAgICAgICAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgICAgICAgIGRlZmF1bHQ6ICduYW1lJ1xuICAgICAgICAgIH0sXG4gICAgICAgICAgcmVtb3RlS2V5OiB7XG4gICAgICAgICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICAgICAgICBkZWZhdWx0OiAnJ1xuICAgICAgICAgIH0sXG4gICAgICAgICAgcmVtb3RlVmFsdWU6IHtcbiAgICAgICAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgICAgICAgIGRlZmF1bHQ6ICcnXG4gICAgICAgICAgfSxcbiAgICAgICAgICByZW1vdGVQcmltYXJ5VmFsdWU6IHtcblxuICAgICAgICAgICAgZGVmYXVsdDonJyxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHJlbW90ZVZhbHVlU2VsZWN0OiB7XG4gICAgICAgICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICAgICAgICBkZWZhdWx0OicnXG4gICAgICAgICAgfSxcbiAgICAgICAgICBjbGF6ejoge1xuICAgICAgICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgICAgICAgZGVmYXVsdDpcIlwiXG4gICAgICAgICAgfSxcbiAgICAgICAgICByZXR1cm5Qcm9taXNlOntcbiAgICAgICAgICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgICAgICAgICByZXF1aXJlZDogZmFsc2UsXG4gICAgICAgICAgICBkZWZhdWx0OiBmYWxzZVxuICAgICAgICAgIH0sXG4gICAgICAgICAgdmFsaWRhdGlvbkVycm9yczogeyB0eXBlOkFycmF5LFxuICAgICAgICAgICAgZGVmYXVsdDogZnVuY3Rpb24oKSB7IHJldHVybiBbXX1cbiAgICAgICAgICB9LFxuICAgICAgICAgIHBsYWNlaG9sZGVyOntcbiAgICAgICAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgICAgICAgIGRlZmF1bHQ6ICduYW1lJ1xuICAgICAgICAgIH0sXG5cbiAgICAgICAgICBzZWxlY3RlZDoge1xuICAgICAgICAgICAgdHlwZTogT2JqZWN0LFxuICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgICAgICBkZWZhdWx0OiAgZnVuY3Rpb24oKSB7IHJldHVybiB7fX1cbiAgICAgICAgICB9LFxuICAgICAgICAgIG5hbWU6IHtcbiAgICAgICAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgICAgICAgIGRlZmF1bHQ6J3NlYXJjaCdcbiAgICAgICAgICB9LFxuICAgICAgICAgIHNlYXJjaExlbmd0aDp7XG4gICAgICAgICAgICB0eXBlOiBOdW1iZXIsXG4gICAgICAgICAgICByZXF1aXJlZDogZmFsc2UsXG4gICAgICAgICAgICBkZWZhdWx0OiAzXG4gICAgICAgICAgfSxcbiAgICAgICAgICBpdGVtczoge1xuICAgICAgICAgICAgdHlwZTogQXJyYXksXG4gICAgICAgICAgICByZXF1aXJlZDogZmFsc2UsXG4gICAgICAgICAgICBkZWZhdWx0OiAgZnVuY3Rpb24oKSB7IHJldHVybiBbXX1cbiAgICAgICAgICB9LFxuICAgICAgICAgIGlzQXN5bmM6IHtcbiAgICAgICAgICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgICAgICAgICByZXF1aXJlZDogZmFsc2UsXG4gICAgICAgICAgICBkZWZhdWx0OiBmYWxzZVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgY29tcHV0ZWQ6IHtcbiAgICAgICAgICAgIHByaW1hcnlWYWx1ZTpmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5yZW1vdGVQcmltYXJ5VmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVtb3RlUHJpbWFyeVZhbHVlXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICh0aGlzLnJlbW90ZVZhbHVlID8gdGhpcy5yZW1vdGVWYWx1ZSA6IHRoaXMudmFsdWVGaWVsZClcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY3VycmVudFZhbHVlOmZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiAodGhpcy5yZW1vdGVWYWx1ZSA/IHRoaXMucmVtb3RlVmFsdWUgOiB0aGlzLnZhbHVlRmllbGQpXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY3VycmVudEtleTpmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gKHRoaXMucmVtb3RlS2V5ID8gdGhpcy5yZW1vdGVLZXkgOiB0aGlzLmtleUZpZWxkKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVycm9yQ2xheno6ZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICh0aGlzLnZhbGlkYXRpb25FcnJvcnMuaW5jbHVkZXModGhpcy5uYW1lKSkgPyAnaXMtaW52YWxpZCcgOiAnJ1xuICAgICAgICAgICAgfVxuXG4gICAgICAgIH0sXG5cbiAgICAgICAgZGF0YTpmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgaXNPcGVuOiBmYWxzZSxcbiAgICAgICAgICAgICAgICByZXN1bHRzOiBbXSxcbiAgICAgICAgICAgICAgICBzZWFyY2g6ICcnLFxuICAgICAgICAgICAgICAgIGZvdW5kOicnLFxuICAgICAgICAgICAgICAgIGhpZGRlbklkOicnLFxuICAgICAgICAgICAgICAgIGlzTG9hZGluZzogZmFsc2UsXG4gICAgICAgICAgICAgICAgcmVzdWx0U2V0OmZhbHNlLFxuICAgICAgICAgICAgICAgIGFycm93Q291bnRlcjogMCxcbiAgICAgICAgICAgICAgICBsYXN0U2VhcmNoOicnLFxuICAgICAgICAgICAgICAgIHNlYXJjaENoYW5nZWQ6ZmFsc2UsXG4gICAgICAgICAgICAgICAgY3VycmVudFNlbGVjdGVkOicnXG4gICAgICAgICAgICB9O1xuICAgICAgICB9LFxuICAgICAgICBtZXRob2RzOiB7XG4gICAgICAgICAgICBvbkNoYW5nZTpmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNlYXJjaENoYW5nZWQ9dHJ1ZVxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmN1cnJlbnRTZWxlY3RlZFt0aGlzLnZhbHVlRmllbGRdIT0nJyB8fCB0aGlzLmN1cnJlbnRTZWxlY3RlZFt0aGlzLmtleUZpZWxkXSE9Jycpe1xuICAgICAgICAgICAgICAgICAgICB2YXIgYWEgPSB0aGlzLnNlbGVjdGVkXG4gICAgICAgICAgICAgICAgICAgIGFhW3RoaXMudmFsdWVGaWVsZF0gPScnXG4gICAgICAgICAgICAgICAgICAgIGFhW3RoaXMua2V5RmllbGRdID0gJydcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50U2VsZWN0ZWQ9YWFcblxuICAgICAgICAgICAgICAgICAgICB0aGlzLiRlbWl0KCdpbnB1dCcsIGFhKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zZWFyY2gubGVuZ3RoPj10aGlzLnNlYXJjaExlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLiRlbWl0KCdrZXktcHJlc3MnLCB0aGlzLnNlYXJjaCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzQXN5bmMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaXNMb2FkaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZmlsdGVyUmVzdWx0cygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pc09wZW4gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGZpbHRlclJlc3VsdHM6ZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJwdiA9IHRoaXMucmVtb3RlUHJpbWFyeVZhbHVlXG4gICAgICAgICAgICAgICAgdmFyIHNjaD10aGlzLnNlYXJjaFxuICAgICAgICAgICAgICAgIHZhciBjdj10aGlzLmN1cnJlbnRWYWx1ZVxuICAgICAgICAgICAgICAgIHRoaXMucmVzdWx0cyA9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaXRlbXMuZmlsdGVyKGZ1bmN0aW9uKGl0ZW0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpdGVtICYmIHJwdiE9dW5kZWZpbmVkICYmIGl0ZW0uaGFzT3duUHJvcGVydHkocnB2KSl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW1bcnB2XS50b0xvd2VyQ2FzZSgpLmluZGV4T2Yoc2NoLnRvTG93ZXJDYXNlKCkpID4gLTE7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtW2N2XSAmJiBzY2ggJiYgaXRlbVtjdl0udG9Mb3dlckNhc2UoKS5pbmRleE9mKHNjaC50b0xvd2VyQ2FzZSgpKSA+IC0xO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNldFJlc3VsdDpmdW5jdGlvbihyZXN1bHQsaSkge1xuICAgICAgICAgICAgICAgIHRoaXMuYXJyb3dDb3VudGVyID0gaTtcbiAgICAgICAgICAgICAgICB0aGlzLnJlc3VsdFNldD10cnVlXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucmV0dXJuUHJvbWlzZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLiRlbWl0KCdyZXR1cm4tcHJvbWlzZScsIHJlc3VsdClcbiAgICAgICAgICAgICAgICAgICAgdmFyIGtleSA9dGhpcy5jdXJyZW50VmFsdWVcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucmVtb3RlUHJpbWFyeVZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBrZXkgPSByZXN1bHQuaGFzT3duUHJvcGVydHkodGhpcy5yZW1vdGVQcmltYXJ5VmFsdWUpID8gdGhpcy5yZW1vdGVQcmltYXJ5VmFsdWUgOiB0aGlzLmN1cnJlbnRWYWx1ZVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnJlbW90ZVZhbHVlU2VsZWN0ICYmIHJlc3VsdC5oYXNPd25Qcm9wZXJ0eSh0aGlzLnJlbW90ZVZhbHVlU2VsZWN0KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAga2V5ID0gdGhpcy5yZW1vdGVWYWx1ZVNlbGVjdFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZm91bmQgPSByZXN1bHRba2V5XTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZm91bmQubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWFyY2ggPSB0aGlzLmZvdW5kO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5oaWRkZW5JZCA9IHJlc3VsdFt0aGlzLmN1cnJlbnRLZXldO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaXNPcGVuID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGtleSA9dGhpcy5jdXJyZW50VmFsdWVcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucmVtb3RlUHJpbWFyeVZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBrZXkgPSByZXN1bHQuaGFzT3duUHJvcGVydHkodGhpcy5yZW1vdGVQcmltYXJ5VmFsdWUpID8gdGhpcy5yZW1vdGVQcmltYXJ5VmFsdWUgOnRoaXMuY3VycmVudFZhbHVlXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucmVtb3RlVmFsdWVTZWxlY3QgJiYgcmVzdWx0Lmhhc093blByb3BlcnR5KHRoaXMucmVtb3RlVmFsdWVTZWxlY3QpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBrZXkgPSB0aGlzLnJlbW90ZVZhbHVlU2VsZWN0XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5mb3VuZCA9IHJlc3VsdFtrZXldO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5mb3VuZC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlYXJjaCA9IHRoaXMuZm91bmQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmhpZGRlbklkID0gcmVzdWx0W3RoaXMuY3VycmVudEtleV07XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhYSA9IHRoaXMuc2VsZWN0ZWRcbiAgICAgICAgICAgICAgICAgICAgICAgIGFhW3RoaXMudmFsdWVGaWVsZF0gPSB0aGlzLnNlYXJjaFxuICAgICAgICAgICAgICAgICAgICAgICAgYWFbdGhpcy5rZXlGaWVsZF0gPSB0aGlzLmhpZGRlbklkXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRlbWl0KCdpbnB1dCcsIGFhKVxuXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRlbWl0KCdzZWFyY2gtdmFsdWUnLCB0aGlzLnNlYXJjaCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRlbWl0KCdzZWFyY2gta2V5JywgdGhpcy5oaWRkZW5JZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmlzT3BlbiA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFhID0gdGhpcy5zZWxlY3RlZFxuICAgICAgICAgICAgICAgICAgICAgICAgYWFbdGhpcy52YWx1ZUZpZWxkXSA9JydcbiAgICAgICAgICAgICAgICAgICAgICAgIGFhW3RoaXMua2V5RmllbGRdID0gJydcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJGVtaXQoJ2lucHV0JywgYWEpXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJGVtaXQoJ3NlYXJjaC12YWx1ZScsICcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJGVtaXQoJ3NlYXJjaC1rZXknLCAnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmlzT3BlbiA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY29uZmlybUZvY3VzOmZ1bmN0aW9uKGV2dCkge1xuICAgICAgICAgICAgICAgIHRoaXMucmVzdWx0U2V0PWZhbHNlXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgLypcbiAgICAgICAgICAgICogcmFjZSBjb25kaXRpb24gLSBuZWVkIHRvIGVuc3VyZSB1c2VyIHNlbGVjdGVkIGF1dG8gY29tcGxldGVcbiAgICAgICAgICAgICogYXBwZWFycyB0byB3b3JrIGFuZCBpcyB0cmlnZ2VyZWQgd2hlbiBvcGVuIGF1dG8gY29tcGxldGUgY2xvc2VzIHNvIGFzIGV4cGVjdGVkXG4gICAgICAgICAgICAqL1xuICAgICAgICAgICAgY29uZmlybUJsdXI6ZnVuY3Rpb24oZXZ0KSB7XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmZvdW5kIT10aGlzLnNlYXJjaCAmJiB0aGlzLnNlYXJjaENoYW5nZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VhcmNoPScnXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmhpZGRlbklkID0gJydcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0uYmluZCh0aGlzKSwgMTgwKVxuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgY29uZmlybVZhbHVlOmZ1bmN0aW9uKGV2dCkge1xuICAgICAgICAgICAgICAgIHZhciBwcm9jZXNzU2VhcmNoPXRydWVcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLnJlc3VsdFNldCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAgdGhpcy5yZXN1bHRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh0aGlzLnJlc3VsdHNbaV0pLmhhc093blByb3BlcnR5KHRoaXMucmVtb3RlUHJpbWFyeVZhbHVlKSl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodGhpcy5yZXN1bHRzW2ldKVt0aGlzLnJlbW90ZVByaW1hcnlWYWx1ZV0udG9Mb3dlckNhc2UoKT09PXRoaXMuc2VhcmNoLnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaXNPcGVuID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2Nlc3NTZWFyY2g9ZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0UmVzdWx0KHRoaXMucmVzdWx0c1tpXSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodGhpcy5yZXN1bHRzW2ldKVt0aGlzLmN1cnJlbnRWYWx1ZV0udG9Mb3dlckNhc2UoKT09PXRoaXMuc2VhcmNoLnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaXNPcGVuID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2Nlc3NTZWFyY2g9ZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0UmVzdWx0KHRoaXMucmVzdWx0c1tpXSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucHJvY2Vzc1NlYXJjaCAmJiAodGhpcy5mb3VuZC5sZW5ndGg9PT0wfHx0aGlzLmZvdW5kLmxlbmd0aD4wICYmIHRoaXMuc2VhcmNoICE9IHRoaXMucmVzdWx0ICkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlYXJjaD0nJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZm91bmQ9JydcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0uYmluZCh0aGlzKSwgMTgwKVxuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgb25UYWI6ZnVuY3Rpb24oZXZ0KSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNPcGVuKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnJlc3VsdHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGl4ID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmFycm93Q291bnRlciA+IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXggPSB0aGlzLmFycm93Q291bnRlcjsgLy8gcGljayBhcnJvdyBzZWxlY3Rpb24gb3RoZXJ3aXNlIGZpcnN0IGl0ZW1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0UmVzdWx0KHRoaXMucmVzdWx0c1tpeF0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaXNPcGVuID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJvY2Vzc1NlYXJjaCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFycm93Q291bnRlciA9IC0xO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBpc0Z1bGw6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmZvdW5kLmxlbmd0aD4wXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb25BcnJvd0Rvd246ZnVuY3Rpb24gKGV2dCkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmFycm93Q291bnRlciA8IHRoaXMucmVzdWx0cy5sZW5ndGgtMSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFycm93Q291bnRlciA9IHRoaXMuYXJyb3dDb3VudGVyICsgMTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5maXhTY3JvbGxpbmcoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb25BcnJvd1VwOmZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5hcnJvd0NvdW50ZXIgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYXJyb3dDb3VudGVyID0gdGhpcy5hcnJvd0NvdW50ZXIgLSAxO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmZpeFNjcm9sbGluZygpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGZpeFNjcm9sbGluZzpmdW5jdGlvbiAoKXtcbiAgICAgICAgICAgICAgICBjb25zdCBsaUggPSB0aGlzLiRyZWZzLm9wdGlvbnNbdGhpcy5hcnJvd0NvdW50ZXJdLmNsaWVudEhlaWdodDtcbiAgICAgICAgICAgICAgICB0aGlzLiRyZWZzLmF1dG9jb21wbGV0ZVJlc3VsdHMuc2Nyb2xsVG9wID0gbGlIICogdGhpcy5hcnJvd0NvdW50ZXI7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb25FbnRlcjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRSZXN1bHQodGhpcy5yZXN1bHRzW3RoaXMuYXJyb3dDb3VudGVyXSk7XG4gICAgICAgICAgICAgICAgdGhpcy5pc09wZW4gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB0aGlzLmFycm93Q291bnRlciA9IC0xO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGhhbmRsZUNsaWNrT3V0c2lkZTogZnVuY3Rpb24oZXZ0KSB7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLiRlbC5jb250YWlucyhldnQudGFyZ2V0KSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmlzT3BlbiA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFycm93Q291bnRlciA9IC0xO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgd2F0Y2g6IHtcbiAgICAgICAgICAgIHNlbGVjdGVkOiBmdW5jdGlvbiAodmFsLCBvbGRWYWx1ZSkge1xuICAgICAgICAgICAgICAgIGlmICh2YWxbdGhpcy52YWx1ZUZpZWxkXSE9b2xkVmFsdWVbdGhpcy52YWx1ZUZpZWxkXSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlYXJjaD12YWxbdGhpcy52YWx1ZUZpZWxkXVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmhpZGRlbklkPXZhbFt0aGlzLmtleUZpZWxkXVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmxhc3RTZWFyY2g9IHRoaXMuc2VhcmNoO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBpdGVtczogZnVuY3Rpb24gKHZhbCwgb2xkVmFsdWUpIHtcbiAgICAgICAgICAgICAgICBpZiAodmFsLmxlbmd0aCAhPT0gb2xkVmFsdWUubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVzdWx0cyA9IHZhbDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pc0xvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGNyZWF0ZWQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuY3VycmVudFNlbGVjdGVkPXRoaXMuc2VsZWN0ZWRcbiAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdGVkICYmIHRoaXMuc2VsZWN0ZWRbdGhpcy52YWx1ZUZpZWxkXSAmJiB0aGlzLnNlbGVjdGVkW3RoaXMua2V5RmllbGRdICkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VhcmNoPXRoaXMuc2VsZWN0ZWRbdGhpcy52YWx1ZUZpZWxkXVxuICAgICAgICAgICAgICAgIHRoaXMuaGlkZGVuSWQ9dGhpcy5zZWxlY3RlZFt0aGlzLmtleUZpZWxkXVxuICAgICAgICAgICAgICAgIHRoaXMubGFzdFNlYXJjaD0gdGhpcy5zZWFyY2g7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIG1vdW50ZWQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmhhbmRsZUNsaWNrT3V0c2lkZSlcbiAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdGVkICYmIHRoaXMuc2VsZWN0ZWRbdGhpcy52YWx1ZUZpZWxkXSAmJiB0aGlzLnNlbGVjdGVkW3RoaXMua2V5RmllbGRdKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWFyY2g9dGhpcy5zZWxlY3RlZFt0aGlzLnZhbHVlRmllbGRdXG4gICAgICAgICAgICAgICAgdGhpcy5oaWRkZW5JZD10aGlzLnNlbGVjdGVkW3RoaXMua2V5RmllbGRdXG4gICAgICAgICAgICAgICAgdGhpcy5sYXN0U2VhcmNoPSB0aGlzLnNlYXJjaDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgZGVzdHJveWVkOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5oYW5kbGVDbGlja091dHNpZGUpXG4gICAgICAgIH1cbiAgICB9O1xuPC9zY3JpcHQ+XG48c3R5bGUgc3JjPVwiLi92dWUtYXV0b2NvbXBsZXRpb24uY3NzXCI+PC9zdHlsZT4iLCJpbXBvcnQgbW9kIGZyb20gXCItIS4uL25vZGVfbW9kdWxlcy9iYWJlbC1sb2FkZXIvbGliL2luZGV4LmpzIS4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9pbmRleC5qcz8/dnVlLWxvYWRlci1vcHRpb25zIS4vVnVlQXV0b2NvbXBsZXRpb24udnVlP3Z1ZSZ0eXBlPXNjcmlwdCZsYW5nPWpzJlwiOyBleHBvcnQgZGVmYXVsdCBtb2Q7IGV4cG9ydCAqIGZyb20gXCItIS4uL25vZGVfbW9kdWxlcy9iYWJlbC1sb2FkZXIvbGliL2luZGV4LmpzIS4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9pbmRleC5qcz8/dnVlLWxvYWRlci1vcHRpb25zIS4vVnVlQXV0b2NvbXBsZXRpb24udnVlP3Z1ZSZ0eXBlPXNjcmlwdCZsYW5nPWpzJlwiIiwiLyogZ2xvYmFscyBfX1ZVRV9TU1JfQ09OVEVYVF9fICovXG5cbi8vIElNUE9SVEFOVDogRG8gTk9UIHVzZSBFUzIwMTUgZmVhdHVyZXMgaW4gdGhpcyBmaWxlIChleGNlcHQgZm9yIG1vZHVsZXMpLlxuLy8gVGhpcyBtb2R1bGUgaXMgYSBydW50aW1lIHV0aWxpdHkgZm9yIGNsZWFuZXIgY29tcG9uZW50IG1vZHVsZSBvdXRwdXQgYW5kIHdpbGxcbi8vIGJlIGluY2x1ZGVkIGluIHRoZSBmaW5hbCB3ZWJwYWNrIHVzZXIgYnVuZGxlLlxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBub3JtYWxpemVDb21wb25lbnQgKFxuICBzY3JpcHRFeHBvcnRzLFxuICByZW5kZXIsXG4gIHN0YXRpY1JlbmRlckZucyxcbiAgZnVuY3Rpb25hbFRlbXBsYXRlLFxuICBpbmplY3RTdHlsZXMsXG4gIHNjb3BlSWQsXG4gIG1vZHVsZUlkZW50aWZpZXIsIC8qIHNlcnZlciBvbmx5ICovXG4gIHNoYWRvd01vZGUgLyogdnVlLWNsaSBvbmx5ICovXG4pIHtcbiAgLy8gVnVlLmV4dGVuZCBjb25zdHJ1Y3RvciBleHBvcnQgaW50ZXJvcFxuICB2YXIgb3B0aW9ucyA9IHR5cGVvZiBzY3JpcHRFeHBvcnRzID09PSAnZnVuY3Rpb24nXG4gICAgPyBzY3JpcHRFeHBvcnRzLm9wdGlvbnNcbiAgICA6IHNjcmlwdEV4cG9ydHNcblxuICAvLyByZW5kZXIgZnVuY3Rpb25zXG4gIGlmIChyZW5kZXIpIHtcbiAgICBvcHRpb25zLnJlbmRlciA9IHJlbmRlclxuICAgIG9wdGlvbnMuc3RhdGljUmVuZGVyRm5zID0gc3RhdGljUmVuZGVyRm5zXG4gICAgb3B0aW9ucy5fY29tcGlsZWQgPSB0cnVlXG4gIH1cblxuICAvLyBmdW5jdGlvbmFsIHRlbXBsYXRlXG4gIGlmIChmdW5jdGlvbmFsVGVtcGxhdGUpIHtcbiAgICBvcHRpb25zLmZ1bmN0aW9uYWwgPSB0cnVlXG4gIH1cblxuICAvLyBzY29wZWRJZFxuICBpZiAoc2NvcGVJZCkge1xuICAgIG9wdGlvbnMuX3Njb3BlSWQgPSAnZGF0YS12LScgKyBzY29wZUlkXG4gIH1cblxuICB2YXIgaG9va1xuICBpZiAobW9kdWxlSWRlbnRpZmllcikgeyAvLyBzZXJ2ZXIgYnVpbGRcbiAgICBob29rID0gZnVuY3Rpb24gKGNvbnRleHQpIHtcbiAgICAgIC8vIDIuMyBpbmplY3Rpb25cbiAgICAgIGNvbnRleHQgPVxuICAgICAgICBjb250ZXh0IHx8IC8vIGNhY2hlZCBjYWxsXG4gICAgICAgICh0aGlzLiR2bm9kZSAmJiB0aGlzLiR2bm9kZS5zc3JDb250ZXh0KSB8fCAvLyBzdGF0ZWZ1bFxuICAgICAgICAodGhpcy5wYXJlbnQgJiYgdGhpcy5wYXJlbnQuJHZub2RlICYmIHRoaXMucGFyZW50LiR2bm9kZS5zc3JDb250ZXh0KSAvLyBmdW5jdGlvbmFsXG4gICAgICAvLyAyLjIgd2l0aCBydW5Jbk5ld0NvbnRleHQ6IHRydWVcbiAgICAgIGlmICghY29udGV4dCAmJiB0eXBlb2YgX19WVUVfU1NSX0NPTlRFWFRfXyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgY29udGV4dCA9IF9fVlVFX1NTUl9DT05URVhUX19cbiAgICAgIH1cbiAgICAgIC8vIGluamVjdCBjb21wb25lbnQgc3R5bGVzXG4gICAgICBpZiAoaW5qZWN0U3R5bGVzKSB7XG4gICAgICAgIGluamVjdFN0eWxlcy5jYWxsKHRoaXMsIGNvbnRleHQpXG4gICAgICB9XG4gICAgICAvLyByZWdpc3RlciBjb21wb25lbnQgbW9kdWxlIGlkZW50aWZpZXIgZm9yIGFzeW5jIGNodW5rIGluZmVycmVuY2VcbiAgICAgIGlmIChjb250ZXh0ICYmIGNvbnRleHQuX3JlZ2lzdGVyZWRDb21wb25lbnRzKSB7XG4gICAgICAgIGNvbnRleHQuX3JlZ2lzdGVyZWRDb21wb25lbnRzLmFkZChtb2R1bGVJZGVudGlmaWVyKVxuICAgICAgfVxuICAgIH1cbiAgICAvLyB1c2VkIGJ5IHNzciBpbiBjYXNlIGNvbXBvbmVudCBpcyBjYWNoZWQgYW5kIGJlZm9yZUNyZWF0ZVxuICAgIC8vIG5ldmVyIGdldHMgY2FsbGVkXG4gICAgb3B0aW9ucy5fc3NyUmVnaXN0ZXIgPSBob29rXG4gIH0gZWxzZSBpZiAoaW5qZWN0U3R5bGVzKSB7XG4gICAgaG9vayA9IHNoYWRvd01vZGVcbiAgICAgID8gZnVuY3Rpb24gKCkgeyBpbmplY3RTdHlsZXMuY2FsbCh0aGlzLCB0aGlzLiRyb290LiRvcHRpb25zLnNoYWRvd1Jvb3QpIH1cbiAgICAgIDogaW5qZWN0U3R5bGVzXG4gIH1cblxuICBpZiAoaG9vaykge1xuICAgIGlmIChvcHRpb25zLmZ1bmN0aW9uYWwpIHtcbiAgICAgIC8vIGZvciB0ZW1wbGF0ZS1vbmx5IGhvdC1yZWxvYWQgYmVjYXVzZSBpbiB0aGF0IGNhc2UgdGhlIHJlbmRlciBmbiBkb2Vzbid0XG4gICAgICAvLyBnbyB0aHJvdWdoIHRoZSBub3JtYWxpemVyXG4gICAgICBvcHRpb25zLl9pbmplY3RTdHlsZXMgPSBob29rXG4gICAgICAvLyByZWdpc3RlciBmb3IgZnVuY3Rpb2FsIGNvbXBvbmVudCBpbiB2dWUgZmlsZVxuICAgICAgdmFyIG9yaWdpbmFsUmVuZGVyID0gb3B0aW9ucy5yZW5kZXJcbiAgICAgIG9wdGlvbnMucmVuZGVyID0gZnVuY3Rpb24gcmVuZGVyV2l0aFN0eWxlSW5qZWN0aW9uIChoLCBjb250ZXh0KSB7XG4gICAgICAgIGhvb2suY2FsbChjb250ZXh0KVxuICAgICAgICByZXR1cm4gb3JpZ2luYWxSZW5kZXIoaCwgY29udGV4dClcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gaW5qZWN0IGNvbXBvbmVudCByZWdpc3RyYXRpb24gYXMgYmVmb3JlQ3JlYXRlIGhvb2tcbiAgICAgIHZhciBleGlzdGluZyA9IG9wdGlvbnMuYmVmb3JlQ3JlYXRlXG4gICAgICBvcHRpb25zLmJlZm9yZUNyZWF0ZSA9IGV4aXN0aW5nXG4gICAgICAgID8gW10uY29uY2F0KGV4aXN0aW5nLCBob29rKVxuICAgICAgICA6IFtob29rXVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiB7XG4gICAgZXhwb3J0czogc2NyaXB0RXhwb3J0cyxcbiAgICBvcHRpb25zOiBvcHRpb25zXG4gIH1cbn1cbiIsImltcG9ydCB7IHJlbmRlciwgc3RhdGljUmVuZGVyRm5zIH0gZnJvbSBcIi4vVnVlQXV0b2NvbXBsZXRpb24udnVlP3Z1ZSZ0eXBlPXRlbXBsYXRlJmlkPTc4MTk4YTcwJlwiXG5pbXBvcnQgc2NyaXB0IGZyb20gXCIuL1Z1ZUF1dG9jb21wbGV0aW9uLnZ1ZT92dWUmdHlwZT1zY3JpcHQmbGFuZz1qcyZcIlxuZXhwb3J0ICogZnJvbSBcIi4vVnVlQXV0b2NvbXBsZXRpb24udnVlP3Z1ZSZ0eXBlPXNjcmlwdCZsYW5nPWpzJlwiXG5pbXBvcnQgc3R5bGUwIGZyb20gXCIuL3Z1ZS1hdXRvY29tcGxldGlvbi5jc3M/dnVlJnR5cGU9c3R5bGUmaW5kZXg9MCZsYW5nPWNzcyZcIlxuXG5cbi8qIG5vcm1hbGl6ZSBjb21wb25lbnQgKi9cbmltcG9ydCBub3JtYWxpemVyIGZyb20gXCIhLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3J1bnRpbWUvY29tcG9uZW50Tm9ybWFsaXplci5qc1wiXG52YXIgY29tcG9uZW50ID0gbm9ybWFsaXplcihcbiAgc2NyaXB0LFxuICByZW5kZXIsXG4gIHN0YXRpY1JlbmRlckZucyxcbiAgZmFsc2UsXG4gIG51bGwsXG4gIG51bGwsXG4gIG51bGxcbiAgXG4pXG5cbi8qIGhvdCByZWxvYWQgKi9cbmlmIChtb2R1bGUuaG90KSB7XG4gIHZhciBhcGkgPSByZXF1aXJlKFwiL2hvbWUvdmFoaWQvd29ya3NwYWNlL3ZoL3Z1ZS1hdXRvY29tcGxldGlvbi9ub2RlX21vZHVsZXMvdnVlLWhvdC1yZWxvYWQtYXBpL2Rpc3QvaW5kZXguanNcIilcbiAgYXBpLmluc3RhbGwocmVxdWlyZSgndnVlJykpXG4gIGlmIChhcGkuY29tcGF0aWJsZSkge1xuICAgIG1vZHVsZS5ob3QuYWNjZXB0KClcbiAgICBpZiAoIWFwaS5pc1JlY29yZGVkKCc3ODE5OGE3MCcpKSB7XG4gICAgICBhcGkuY3JlYXRlUmVjb3JkKCc3ODE5OGE3MCcsIGNvbXBvbmVudC5vcHRpb25zKVxuICAgIH0gZWxzZSB7XG4gICAgICBhcGkucmVsb2FkKCc3ODE5OGE3MCcsIGNvbXBvbmVudC5vcHRpb25zKVxuICAgIH1cbiAgICBtb2R1bGUuaG90LmFjY2VwdChcIi4vVnVlQXV0b2NvbXBsZXRpb24udnVlP3Z1ZSZ0eXBlPXRlbXBsYXRlJmlkPTc4MTk4YTcwJlwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICBhcGkucmVyZW5kZXIoJzc4MTk4YTcwJywge1xuICAgICAgICByZW5kZXI6IHJlbmRlcixcbiAgICAgICAgc3RhdGljUmVuZGVyRm5zOiBzdGF0aWNSZW5kZXJGbnNcbiAgICAgIH0pXG4gICAgfSlcbiAgfVxufVxuY29tcG9uZW50Lm9wdGlvbnMuX19maWxlID0gXCJzcmMvVnVlQXV0b2NvbXBsZXRpb24udnVlXCJcbmV4cG9ydCBkZWZhdWx0IGNvbXBvbmVudC5leHBvcnRzIiwidmFyIHJlbmRlciA9IGZ1bmN0aW9uKCkge1xuICB2YXIgX3ZtID0gdGhpc1xuICB2YXIgX2ggPSBfdm0uJGNyZWF0ZUVsZW1lbnRcbiAgdmFyIF9jID0gX3ZtLl9zZWxmLl9jIHx8IF9oXG4gIHJldHVybiBfYyhcInNwYW5cIiwgeyBzdGF0aWNDbGFzczogXCJhdXRvY29tcGxldGUgXCIgfSwgW1xuICAgIF9jKFwiaW5wdXRcIiwge1xuICAgICAgZGlyZWN0aXZlczogW1xuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogXCJ2YWxpZGF0ZVwiLFxuICAgICAgICAgIHJhd05hbWU6IFwidi12YWxpZGF0ZVwiLFxuICAgICAgICAgIHZhbHVlOiBfdm0udmFsaWRhdGlvbixcbiAgICAgICAgICBleHByZXNzaW9uOiBcInZhbGlkYXRpb25cIlxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogXCJtb2RlbFwiLFxuICAgICAgICAgIHJhd05hbWU6IFwidi1tb2RlbFwiLFxuICAgICAgICAgIHZhbHVlOiBfdm0uc2VhcmNoLFxuICAgICAgICAgIGV4cHJlc3Npb246IFwic2VhcmNoXCJcbiAgICAgICAgfVxuICAgICAgXSxcbiAgICAgIHN0YXRpY0NsYXNzOiBcImZvcm0tY29udHJvbFwiLFxuICAgICAgY2xhc3M6IFtfdm0uY2xhenosIF92bS5lcnJvckNsYXp6XSxcbiAgICAgIGF0dHJzOiB7XG4gICAgICAgIHR5cGU6IFwic2VhcmNoXCIsXG4gICAgICAgIG5hbWU6IF92bS5uYW1lLFxuICAgICAgICBhdXRvY29tcGxldGU6IF92bS5uYW1lLFxuICAgICAgICBwbGFjZWhvbGRlcjogX3ZtLnBsYWNlaG9sZGVyXG4gICAgICB9LFxuICAgICAgZG9tUHJvcHM6IHsgdmFsdWU6IF92bS5zZWFyY2ggfSxcbiAgICAgIG9uOiB7XG4gICAgICAgIGlucHV0OiBbXG4gICAgICAgICAgZnVuY3Rpb24oJGV2ZW50KSB7XG4gICAgICAgICAgICBpZiAoJGV2ZW50LnRhcmdldC5jb21wb3NpbmcpIHtcbiAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBfdm0uc2VhcmNoID0gJGV2ZW50LnRhcmdldC52YWx1ZVxuICAgICAgICAgIH0sXG4gICAgICAgICAgX3ZtLm9uQ2hhbmdlXG4gICAgICAgIF0sXG4gICAgICAgIGtleWRvd246IFtcbiAgICAgICAgICBmdW5jdGlvbigkZXZlbnQpIHtcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgISRldmVudC50eXBlLmluZGV4T2YoXCJrZXlcIikgJiZcbiAgICAgICAgICAgICAgX3ZtLl9rKCRldmVudC5rZXlDb2RlLCBcImRvd25cIiwgNDAsICRldmVudC5rZXksIFtcbiAgICAgICAgICAgICAgICBcIkRvd25cIixcbiAgICAgICAgICAgICAgICBcIkFycm93RG93blwiXG4gICAgICAgICAgICAgIF0pXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgcmV0dXJuIG51bGxcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBfdm0ub25BcnJvd0Rvd24oJGV2ZW50KVxuICAgICAgICAgIH0sXG4gICAgICAgICAgZnVuY3Rpb24oJGV2ZW50KSB7XG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICEkZXZlbnQudHlwZS5pbmRleE9mKFwia2V5XCIpICYmXG4gICAgICAgICAgICAgIF92bS5faygkZXZlbnQua2V5Q29kZSwgXCJ0YWJcIiwgOSwgJGV2ZW50LmtleSwgXCJUYWJcIilcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICByZXR1cm4gbnVsbFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIF92bS5vblRhYigkZXZlbnQpXG4gICAgICAgICAgfSxcbiAgICAgICAgICBmdW5jdGlvbigkZXZlbnQpIHtcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgISRldmVudC50eXBlLmluZGV4T2YoXCJrZXlcIikgJiZcbiAgICAgICAgICAgICAgX3ZtLl9rKCRldmVudC5rZXlDb2RlLCBcInVwXCIsIDM4LCAkZXZlbnQua2V5LCBbXCJVcFwiLCBcIkFycm93VXBcIl0pXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgcmV0dXJuIG51bGxcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBfdm0ub25BcnJvd1VwKCRldmVudClcbiAgICAgICAgICB9LFxuICAgICAgICAgIGZ1bmN0aW9uKCRldmVudCkge1xuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAhJGV2ZW50LnR5cGUuaW5kZXhPZihcImtleVwiKSAmJlxuICAgICAgICAgICAgICBfdm0uX2soJGV2ZW50LmtleUNvZGUsIFwiZW50ZXJcIiwgMTMsICRldmVudC5rZXksIFwiRW50ZXJcIilcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICByZXR1cm4gbnVsbFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIF92bS5vbkVudGVyKCRldmVudClcbiAgICAgICAgICB9XG4gICAgICAgIF0sXG4gICAgICAgIGNoYW5nZTogZnVuY3Rpb24oJGV2ZW50KSB7XG4gICAgICAgICAgcmV0dXJuIF92bS5jb25maXJtVmFsdWUoX3ZtLnNlYXJjaClcbiAgICAgICAgfSxcbiAgICAgICAgYmx1cjogX3ZtLmNvbmZpcm1CbHVyLFxuICAgICAgICBmb2N1czogX3ZtLmNvbmZpcm1Gb2N1c1xuICAgICAgfVxuICAgIH0pLFxuICAgIF92bS5fdihcIiBcIiksXG4gICAgX3ZtLmVycm9ycyAmJiBfdm0uZXJyb3JzLmhhcyhfdm0ubmFtZSlcbiAgICAgID8gX2MoXCJkaXZcIiwgeyBzdGF0aWNDbGFzczogXCJjb2wtc20tMTIgYWxlcnQgYWxlcnQtZGFuZ2VyXCIgfSwgW1xuICAgICAgICAgIF92bS5fdihfdm0uX3MoX3ZtLmVycm9ycy5maXJzdChfdm0ubmFtZSkpKVxuICAgICAgICBdKVxuICAgICAgOiBfdm0uX2UoKSxcbiAgICBfdm0uX3YoXCIgXCIpLFxuICAgIF9jKFxuICAgICAgXCJ1bFwiLFxuICAgICAge1xuICAgICAgICBkaXJlY3RpdmVzOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogXCJzaG93XCIsXG4gICAgICAgICAgICByYXdOYW1lOiBcInYtc2hvd1wiLFxuICAgICAgICAgICAgdmFsdWU6IF92bS5pc09wZW4sXG4gICAgICAgICAgICBleHByZXNzaW9uOiBcImlzT3BlblwiXG4gICAgICAgICAgfVxuICAgICAgICBdLFxuICAgICAgICByZWY6IFwiYXV0b2NvbXBsZXRlUmVzdWx0c1wiLFxuICAgICAgICBzdGF0aWNDbGFzczogXCJhdXRvY29tcGxldGUtcmVzdWx0cyAgZm9ybS1jb250cm9sXCIsXG4gICAgICAgIGF0dHJzOiB7IGlkOiBcImF1dG9jb21wbGV0ZS1yZXN1bHRzXCIgfVxuICAgICAgfSxcbiAgICAgIFtcbiAgICAgICAgX3ZtLmlzTG9hZGluZ1xuICAgICAgICAgID8gX2MoXCJsaVwiLCB7IHN0YXRpY0NsYXNzOiBcImxvYWRpbmdcIiB9LCBbXG4gICAgICAgICAgICAgIF92bS5fdihcIlxcbiAgICAgICBMb2FkaW5nIHJlc3VsdHMuLi5cXG4gICAgIFwiKVxuICAgICAgICAgICAgXSlcbiAgICAgICAgICA6IF92bS5fbChfdm0ucmVzdWx0cywgZnVuY3Rpb24ocmVzdWx0LCBpKSB7XG4gICAgICAgICAgICAgIHJldHVybiBfYyhcbiAgICAgICAgICAgICAgICBcImxpXCIsXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAga2V5OiBpLFxuICAgICAgICAgICAgICAgICAgcmVmOiBcIm9wdGlvbnNcIixcbiAgICAgICAgICAgICAgICAgIHJlZkluRm9yOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgc3RhdGljQ2xhc3M6IFwiYXV0b2NvbXBsZXRlLWl0ZW1zXCIsXG4gICAgICAgICAgICAgICAgICBjbGFzczogeyBcImlzLWFjdGl2ZVwiOiBpID09PSBfdm0uYXJyb3dDb3VudGVyIH0sXG4gICAgICAgICAgICAgICAgICBvbjoge1xuICAgICAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24oJGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5zZXRSZXN1bHQocmVzdWx0LCBpKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgICByZXN1bHQuaGFzT3duUHJvcGVydHkoX3ZtLnJlbW90ZVByaW1hcnlWYWx1ZSlcbiAgICAgICAgICAgICAgICAgICAgPyBfYyhcImRpdlwiLCBbXG4gICAgICAgICAgICAgICAgICAgICAgICBfdm0uX3YoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIFwiXFxuICAgICAgIFwiICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdm0uX3MocmVzdWx0W192bS5yZW1vdGVQcmltYXJ5VmFsdWVdKSArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJcXG4gICAgICAgXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICBdKVxuICAgICAgICAgICAgICAgICAgICA6IF9jKFwiZGl2XCIsIFtcbiAgICAgICAgICAgICAgICAgICAgICAgIF92bS5fdihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgXCJcXG4gICAgICAgICBcIiArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3ZtLl9zKHJlc3VsdFtfdm0uY3VycmVudFZhbHVlXSkgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiXFxuICAgICAgIFwiXG4gICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgXSlcbiAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgIH0pXG4gICAgICBdLFxuICAgICAgMlxuICAgICksXG4gICAgX3ZtLl92KFwiIFwiKSxcbiAgICBfYyhcImlucHV0XCIsIHtcbiAgICAgIGRpcmVjdGl2ZXM6IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6IFwidmFsaWRhdGVcIixcbiAgICAgICAgICByYXdOYW1lOiBcInYtdmFsaWRhdGVcIixcbiAgICAgICAgICB2YWx1ZTpcbiAgICAgICAgICAgIF92bS52YWxpZGF0aW9uICYmIF92bS52YWxpZGF0aW9uLnRvU3RyaW5nKCkuaW5jbHVkZXMoXCJyZXF1aXJlZFwiKVxuICAgICAgICAgICAgICA/IFwicmVxdWlyZWRcIlxuICAgICAgICAgICAgICA6IFwiXCIsXG4gICAgICAgICAgZXhwcmVzc2lvbjpcbiAgICAgICAgICAgIFwidmFsaWRhdGlvbiAmJiB2YWxpZGF0aW9uLnRvU3RyaW5nKCkuaW5jbHVkZXMoJ3JlcXVpcmVkJykgPyAncmVxdWlyZWQnIDogJydcIlxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogXCJtb2RlbFwiLFxuICAgICAgICAgIHJhd05hbWU6IFwidi1tb2RlbFwiLFxuICAgICAgICAgIHZhbHVlOiBfdm0uaGlkZGVuSWQsXG4gICAgICAgICAgZXhwcmVzc2lvbjogXCJoaWRkZW5JZFwiXG4gICAgICAgIH1cbiAgICAgIF0sXG4gICAgICBhdHRyczogeyB0eXBlOiBcImhpZGRlblwiLCBuYW1lOiBcImhpZGRlbklkXCIgfSxcbiAgICAgIGRvbVByb3BzOiB7IHZhbHVlOiBfdm0uaGlkZGVuSWQgfSxcbiAgICAgIG9uOiB7XG4gICAgICAgIGlucHV0OiBmdW5jdGlvbigkZXZlbnQpIHtcbiAgICAgICAgICBpZiAoJGV2ZW50LnRhcmdldC5jb21wb3NpbmcpIHtcbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgIH1cbiAgICAgICAgICBfdm0uaGlkZGVuSWQgPSAkZXZlbnQudGFyZ2V0LnZhbHVlXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KVxuICBdKVxufVxudmFyIHN0YXRpY1JlbmRlckZucyA9IFtdXG5yZW5kZXIuX3dpdGhTdHJpcHBlZCA9IHRydWVcblxuZXhwb3J0IHsgcmVuZGVyLCBzdGF0aWNSZW5kZXJGbnMgfSIsIjx0ZW1wbGF0ZT5cbiAgPHNwYW4gY2xhc3M9XCJhdXRvY29tcGxldGUgXCI+XG4gICAgPGlucHV0IHR5cGU9XCJzZWFyY2hcIiA6bmFtZT1cIm5hbWVcIiBAaW5wdXQ9XCJvbkNoYW5nZVwiIHYtdmFsaWRhdGU9XCJ2YWxpZGF0aW9uXCIgOmF1dG9jb21wbGV0ZT1cIm5hbWVcIlxuICAgICAgICAgICB2LW1vZGVsPVwic2VhcmNoXCIgOnBsYWNlaG9sZGVyPVwicGxhY2Vob2xkZXJcIiBAa2V5ZG93bi5kb3duPVwib25BcnJvd0Rvd25cIiBAY2hhbmdlPVwiY29uZmlybVZhbHVlKHNlYXJjaClcIlxuICAgICAgICAgICBAa2V5ZG93bi50YWI9XCJvblRhYlwiIEBrZXlkb3duLnVwPVwib25BcnJvd1VwXCIgQGtleWRvd24uZW50ZXI9XCJvbkVudGVyXCIgQGJsdXI9XCJjb25maXJtQmx1clwiIEBmb2N1cz1cImNvbmZpcm1Gb2N1c1wiXG4gICAgICAgICAgIGNsYXNzPVwiZm9ybS1jb250cm9sXCJcbiAgICAgICAgICAgOmNsYXNzPVwiW2NsYXp6LGVycm9yQ2xhenpdXCJcbiAgICAvPlxuIDxkaXYgdi1pZj1cImVycm9ycyAmJiBlcnJvcnMuaGFzKG5hbWUpXCIgY2xhc3M9XCJjb2wtc20tMTIgYWxlcnQgYWxlcnQtZGFuZ2VyXCI+e3sgZXJyb3JzLmZpcnN0KG5hbWUpfX08L2Rpdj4gICAgPHVsIGlkPVwiYXV0b2NvbXBsZXRlLXJlc3VsdHNcIiB2LXNob3c9XCJpc09wZW5cIiAgcmVmPVwiYXV0b2NvbXBsZXRlUmVzdWx0c1wiIGNsYXNzPVwiYXV0b2NvbXBsZXRlLXJlc3VsdHMgIGZvcm0tY29udHJvbFwiPlxuICAgICAgPGxpIGNsYXNzPVwibG9hZGluZ1wiIHYtaWY9XCJpc0xvYWRpbmdcIj5cbiAgICAgICAgTG9hZGluZyByZXN1bHRzLi4uXG4gICAgICA8L2xpPlxuICAgICAgPGxpIHYtZWxzZSB2LWZvcj1cIihyZXN1bHQsIGkpIGluIHJlc3VsdHNcIiA6a2V5PVwiaVwiICByZWY9XCJvcHRpb25zXCIgIEBjbGljaz1cInNldFJlc3VsdChyZXN1bHQsaSlcIiBjbGFzcz1cImF1dG9jb21wbGV0ZS1pdGVtc1wiXG4gICAgICAgICAgOmNsYXNzPVwieyAnaXMtYWN0aXZlJzogaSA9PT0gYXJyb3dDb3VudGVyIH1cIj5cbiAgICAgICAgPGRpdiB2LWlmPVwicmVzdWx0Lmhhc093blByb3BlcnR5KHJlbW90ZVByaW1hcnlWYWx1ZSlcIj5cbiAgICAgICAge3sgcmVzdWx0W3JlbW90ZVByaW1hcnlWYWx1ZV0gfX1cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgdi1lbHNlPlxuICAgICAgICAgIHt7IHJlc3VsdFtjdXJyZW50VmFsdWVdIH19XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9saT5cbiAgICA8L3VsPlxuICAgIDxpbnB1dCB0eXBlPVwiaGlkZGVuXCIgdi12YWxpZGF0ZT1cInZhbGlkYXRpb24gJiYgdmFsaWRhdGlvbi50b1N0cmluZygpLmluY2x1ZGVzKCdyZXF1aXJlZCcpID8gJ3JlcXVpcmVkJyA6ICcnXCIgIG5hbWU9XCJoaWRkZW5JZFwiIHYtbW9kZWw9XCJoaWRkZW5JZFwiLz5cbiAgPC9zcGFuPlxuPC90ZW1wbGF0ZT5cbjxzY3JpcHQ+XG4gIGV4cG9ydCBkZWZhdWx0IHtcbiAgICBuYW1lOiAndnVlLWF1dG9jb21wbGV0aW9uLXZhbGlkJyxcbiAgICBpbmplY3Q6IFtcIiR2YWxpZGF0b3JcIl0sXG4gICAgcHJvcHM6IHtcbiAgICAgIGtleUZpZWxkOiB7XG4gICAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgICAgZGVmYXVsdDogJ2lkJ1xuICAgICAgfSxcbiAgICAgIHZhbHVlRmllbGQ6IHtcbiAgICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgICBkZWZhdWx0OiAnbmFtZSdcbiAgICAgIH0sXG4gICAgICByZW1vdGVLZXk6IHtcbiAgICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgICBkZWZhdWx0OiAnJ1xuICAgICAgfSxcbiAgICAgIHJlbW90ZVZhbHVlOiB7XG4gICAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgICAgZGVmYXVsdDogJydcbiAgICAgIH0sXG4gICAgICByZW1vdGVQcmltYXJ5VmFsdWU6IHtcblxuICAgICAgICBkZWZhdWx0OicnLFxuICAgICAgfSxcbiAgICAgIHJlbW90ZVZhbHVlU2VsZWN0OiB7XG4gICAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgICAgZGVmYXVsdDonJ1xuICAgICAgfSxcbiAgICAgIGNsYXp6OiB7XG4gICAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgICAgZGVmYXVsdDpcIlwiXG4gICAgICB9LFxuICAgICAgcmV0dXJuUHJvbWlzZTp7XG4gICAgICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgICAgIHJlcXVpcmVkOiBmYWxzZSxcbiAgICAgICAgZGVmYXVsdDogZmFsc2VcbiAgICAgIH0sXG4gICAgICB2YWxpZGF0aW9uRXJyb3JzOiB7IHR5cGU6QXJyYXksXG4gICAgICAgIGRlZmF1bHQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gW119XG4gICAgICB9LFxuICAgICAgcGxhY2Vob2xkZXI6e1xuICAgICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICAgIGRlZmF1bHQ6ICduYW1lJ1xuICAgICAgfSxcbiAgICAgIHZhbGlkYXRpb246IHtcbiAgICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgICByZXF1aXJlZDogZmFsc2UsXG4gICAgICAgIGRlZmF1bHQ6XCJcIlxuICAgICAgfSxcbiAgICAgIHNlbGVjdGVkOiB7XG4gICAgICAgIHR5cGU6IE9iamVjdCxcbiAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgIGRlZmF1bHQ6ICBmdW5jdGlvbigpIHsgcmV0dXJuIHt9fVxuICAgICAgfSxcbiAgICAgIG5hbWU6IHtcbiAgICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgICBkZWZhdWx0OidzZWFyY2gnXG4gICAgICB9LFxuICAgICAgc2VhcmNoTGVuZ3RoOntcbiAgICAgICAgdHlwZTogTnVtYmVyLFxuICAgICAgICByZXF1aXJlZDogZmFsc2UsXG4gICAgICAgIGRlZmF1bHQ6IDNcbiAgICAgIH0sXG4gICAgICBpdGVtczoge1xuICAgICAgICB0eXBlOiBBcnJheSxcbiAgICAgICAgcmVxdWlyZWQ6IGZhbHNlLFxuICAgICAgICBkZWZhdWx0OiAgZnVuY3Rpb24oKSB7IHJldHVybiBbXX1cbiAgICAgIH0sXG4gICAgICBpc0FzeW5jOiB7XG4gICAgICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgICAgIHJlcXVpcmVkOiBmYWxzZSxcbiAgICAgICAgZGVmYXVsdDogZmFsc2VcbiAgICAgIH1cbiAgICB9LFxuICAgIGNvbXB1dGVkOiB7XG4gICAgICBwcmltYXJ5VmFsdWU6ZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICh0aGlzLnJlbW90ZVByaW1hcnlWYWx1ZSkge1xuICAgICAgICAgIHJldHVybiB0aGlzLnJlbW90ZVByaW1hcnlWYWx1ZVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiAodGhpcy5yZW1vdGVWYWx1ZSA/IHRoaXMucmVtb3RlVmFsdWUgOiB0aGlzLnZhbHVlRmllbGQpXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBjdXJyZW50VmFsdWU6ZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiAodGhpcy5yZW1vdGVWYWx1ZSA/IHRoaXMucmVtb3RlVmFsdWUgOiB0aGlzLnZhbHVlRmllbGQpXG4gICAgICB9LFxuICAgICAgY3VycmVudEtleTpmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuICh0aGlzLnJlbW90ZUtleSA/IHRoaXMucmVtb3RlS2V5IDogdGhpcy5rZXlGaWVsZClcbiAgICAgIH0sXG4gICAgICBlcnJvckNsYXp6OmZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gKCh0aGlzLmVycm9ycyAmJiB0aGlzLmVycm9ycy5oYXModGhpcy5uYW1lKXx8IHRoaXMudmFsaWRhdGlvbkVycm9ycy5pbmNsdWRlcyh0aGlzLm5hbWUpKSA/ICdpcy1pbnZhbGlkJyA6ICcnKVxuICAgICAgfVxuXG4gICAgfSxcblxuICAgIGRhdGE6ZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBpc09wZW46IGZhbHNlLFxuICAgICAgICByZXN1bHRzOiBbXSxcbiAgICAgICAgc2VhcmNoOiAnJyxcbiAgICAgICAgZm91bmQ6JycsXG4gICAgICAgIGhpZGRlbklkOicnLFxuICAgICAgICBpc0xvYWRpbmc6IGZhbHNlLFxuICAgICAgICByZXN1bHRTZXQ6ZmFsc2UsXG4gICAgICAgIGFycm93Q291bnRlcjogMCxcbiAgICAgICAgbGFzdFNlYXJjaDonJyxcbiAgICAgICAgc2VhcmNoQ2hhbmdlZDpmYWxzZSxcbiAgICAgICAgY3VycmVudFNlbGVjdGVkOicnXG4gICAgICB9O1xuICAgIH0sXG4gICAgbWV0aG9kczoge1xuICAgICAgb25DaGFuZ2U6ZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoaXMuc2VhcmNoQ2hhbmdlZD10cnVlXG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRTZWxlY3RlZFt0aGlzLnZhbHVlRmllbGRdIT0nJyB8fCB0aGlzLmN1cnJlbnRTZWxlY3RlZFt0aGlzLmtleUZpZWxkXSE9Jycpe1xuICAgICAgICAgIHZhciBhYSA9IHRoaXMuc2VsZWN0ZWRcbiAgICAgICAgICBhYVt0aGlzLnZhbHVlRmllbGRdID0nJ1xuICAgICAgICAgIGFhW3RoaXMua2V5RmllbGRdID0gJydcbiAgICAgICAgICB0aGlzLmN1cnJlbnRTZWxlY3RlZD1hYVxuXG4gICAgICAgICAgdGhpcy4kZW1pdCgnaW5wdXQnLCBhYSlcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5zZWFyY2gubGVuZ3RoPj10aGlzLnNlYXJjaExlbmd0aCkge1xuICAgICAgICAgIHRoaXMuJGVtaXQoJ2tleS1wcmVzcycsIHRoaXMuc2VhcmNoKTtcbiAgICAgICAgICBpZiAodGhpcy5pc0FzeW5jKSB7XG4gICAgICAgICAgICB0aGlzLmlzTG9hZGluZyA9IHRydWU7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuZmlsdGVyUmVzdWx0cygpO1xuICAgICAgICAgICAgdGhpcy5pc09wZW4gPSB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGZpbHRlclJlc3VsdHM6ZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBycHYgPSB0aGlzLnJlbW90ZVByaW1hcnlWYWx1ZVxuICAgICAgICB2YXIgc2NoPXRoaXMuc2VhcmNoXG4gICAgICAgIHZhciBjdj10aGlzLmN1cnJlbnRWYWx1ZVxuICAgICAgICB0aGlzLnJlc3VsdHMgPVxuICAgICAgICAgICAgICAgIHRoaXMuaXRlbXMuZmlsdGVyKGZ1bmN0aW9uKGl0ZW0pIHtcbiAgICAgICAgICAgICAgICAgIGlmIChpdGVtICYmIHJwdiE9dW5kZWZpbmVkICYmIGl0ZW0uaGFzT3duUHJvcGVydHkocnB2KSl7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtW3Jwdl0udG9Mb3dlckNhc2UoKS5pbmRleE9mKHNjaC50b0xvd2VyQ2FzZSgpKSA+IC0xO1xuICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW1bY3ZdICYmIHNjaCAmJiBpdGVtW2N2XS50b0xvd2VyQ2FzZSgpLmluZGV4T2Yoc2NoLnRvTG93ZXJDYXNlKCkpID4gLTE7XG4gICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgIH0sXG4gICAgICBzZXRSZXN1bHQ6ZnVuY3Rpb24ocmVzdWx0LGkpIHtcbiAgICAgICAgdGhpcy5hcnJvd0NvdW50ZXIgPSBpO1xuICAgICAgICB0aGlzLnJlc3VsdFNldD10cnVlXG4gICAgICAgIGlmICh0aGlzLnJldHVyblByb21pc2UpIHtcbiAgICAgICAgICB0aGlzLiRlbWl0KCdyZXR1cm4tcHJvbWlzZScsIHJlc3VsdClcbiAgICAgICAgICB2YXIga2V5ID10aGlzLmN1cnJlbnRWYWx1ZVxuICAgICAgICAgIGlmICh0aGlzLnJlbW90ZVByaW1hcnlWYWx1ZSkge1xuICAgICAgICAgICAga2V5ID0gcmVzdWx0Lmhhc093blByb3BlcnR5KHRoaXMucmVtb3RlUHJpbWFyeVZhbHVlKSA/IHRoaXMucmVtb3RlUHJpbWFyeVZhbHVlIDogdGhpcy5jdXJyZW50VmFsdWVcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHRoaXMucmVtb3RlVmFsdWVTZWxlY3QgJiYgcmVzdWx0Lmhhc093blByb3BlcnR5KHRoaXMucmVtb3RlVmFsdWVTZWxlY3QpKSB7XG4gICAgICAgICAgICBrZXkgPSB0aGlzLnJlbW90ZVZhbHVlU2VsZWN0XG4gICAgICAgICAgfVxuICAgICAgICAgIHRoaXMuZm91bmQgPSByZXN1bHRba2V5XTtcbiAgICAgICAgICBpZiAodGhpcy5mb3VuZC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICB0aGlzLnNlYXJjaCA9IHRoaXMuZm91bmQ7XG4gICAgICAgICAgICB0aGlzLmhpZGRlbklkID0gcmVzdWx0W3RoaXMuY3VycmVudEtleV07XG4gICAgICAgICAgfVxuICAgICAgICAgIHRoaXMuaXNPcGVuID0gZmFsc2U7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFyIGtleSA9dGhpcy5jdXJyZW50VmFsdWVcbiAgICAgICAgICBpZiAodGhpcy5yZW1vdGVQcmltYXJ5VmFsdWUpIHtcbiAgICAgICAgICAgIGtleSA9IHJlc3VsdC5oYXNPd25Qcm9wZXJ0eSh0aGlzLnJlbW90ZVByaW1hcnlWYWx1ZSkgPyB0aGlzLnJlbW90ZVByaW1hcnlWYWx1ZSA6dGhpcy5jdXJyZW50VmFsdWVcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHRoaXMucmVtb3RlVmFsdWVTZWxlY3QgJiYgcmVzdWx0Lmhhc093blByb3BlcnR5KHRoaXMucmVtb3RlVmFsdWVTZWxlY3QpKSB7XG4gICAgICAgICAgICBrZXkgPSB0aGlzLnJlbW90ZVZhbHVlU2VsZWN0XG4gICAgICAgICAgfVxuICAgICAgICAgIHRoaXMuZm91bmQgPSByZXN1bHRba2V5XTtcbiAgICAgICAgICBpZiAodGhpcy5mb3VuZC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICB0aGlzLnNlYXJjaCA9IHRoaXMuZm91bmQ7XG4gICAgICAgICAgICB0aGlzLmhpZGRlbklkID0gcmVzdWx0W3RoaXMuY3VycmVudEtleV07XG5cbiAgICAgICAgICAgIHZhciBhYSA9IHRoaXMuc2VsZWN0ZWRcbiAgICAgICAgICAgIGFhW3RoaXMudmFsdWVGaWVsZF0gPSB0aGlzLnNlYXJjaFxuICAgICAgICAgICAgYWFbdGhpcy5rZXlGaWVsZF0gPSB0aGlzLmhpZGRlbklkXG4gICAgICAgICAgICB0aGlzLiRlbWl0KCdpbnB1dCcsIGFhKVxuXG4gICAgICAgICAgICB0aGlzLiRlbWl0KCdzZWFyY2gtdmFsdWUnLCB0aGlzLnNlYXJjaCk7XG4gICAgICAgICAgICB0aGlzLiRlbWl0KCdzZWFyY2gta2V5JywgdGhpcy5oaWRkZW5JZCk7XG4gICAgICAgICAgICB0aGlzLmlzT3BlbiA9IGZhbHNlO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YXIgYWEgPSB0aGlzLnNlbGVjdGVkXG4gICAgICAgICAgICBhYVt0aGlzLnZhbHVlRmllbGRdID0nJ1xuICAgICAgICAgICAgYWFbdGhpcy5rZXlGaWVsZF0gPSAnJ1xuICAgICAgICAgICAgdGhpcy4kZW1pdCgnaW5wdXQnLCBhYSlcblxuICAgICAgICAgICAgdGhpcy4kZW1pdCgnc2VhcmNoLXZhbHVlJywgJycpO1xuICAgICAgICAgICAgdGhpcy4kZW1pdCgnc2VhcmNoLWtleScsICcnKTtcbiAgICAgICAgICAgIHRoaXMuaXNPcGVuID0gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgIH0sXG4gICAgICBjb25maXJtRm9jdXM6ZnVuY3Rpb24oZXZ0KSB7XG4gICAgICAgIHRoaXMucmVzdWx0U2V0PWZhbHNlXG4gICAgICB9LFxuICAgICAgLypcbiAgICAgICogcmFjZSBjb25kaXRpb24gLSBuZWVkIHRvIGVuc3VyZSB1c2VyIHNlbGVjdGVkIGF1dG8gY29tcGxldGVcbiAgICAgICogYXBwZWFycyB0byB3b3JrIGFuZCBpcyB0cmlnZ2VyZWQgd2hlbiBvcGVuIGF1dG8gY29tcGxldGUgY2xvc2VzIHNvIGFzIGV4cGVjdGVkXG4gICAgICAqL1xuICAgICAgY29uZmlybUJsdXI6ZnVuY3Rpb24oZXZ0KSB7XG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGlmICh0aGlzLmZvdW5kIT10aGlzLnNlYXJjaCAmJiB0aGlzLnNlYXJjaENoYW5nZWQpIHtcbiAgICAgICAgICAgIHRoaXMuc2VhcmNoPScnXG4gICAgICAgICAgICB0aGlzLmhpZGRlbklkID0gJydcbiAgICAgICAgICB9XG4gICAgICAgIH0uYmluZCh0aGlzKSwgMTgwKVxuICAgICAgfSxcblxuICAgICAgY29uZmlybVZhbHVlOmZ1bmN0aW9uKGV2dCkge1xuICAgICAgICB2YXIgcHJvY2Vzc1NlYXJjaD10cnVlXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGlmICghdGhpcy5yZXN1bHRTZXQpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgIHRoaXMucmVzdWx0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICBpZiAoKHRoaXMucmVzdWx0c1tpXSkuaGFzT3duUHJvcGVydHkodGhpcy5yZW1vdGVQcmltYXJ5VmFsdWUpKXtcbiAgICAgICAgICAgICAgICBpZiAoKHRoaXMucmVzdWx0c1tpXSlbdGhpcy5yZW1vdGVQcmltYXJ5VmFsdWVdLnRvTG93ZXJDYXNlKCk9PT10aGlzLnNlYXJjaC50b0xvd2VyQ2FzZSgpKSB7XG4gICAgICAgICAgICAgICAgICB0aGlzLmlzT3BlbiA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgdGhpcy5wcm9jZXNzU2VhcmNoPWZhbHNlXG4gICAgICAgICAgICAgICAgICB0aGlzLnNldFJlc3VsdCh0aGlzLnJlc3VsdHNbaV0pXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmICgodGhpcy5yZXN1bHRzW2ldKVt0aGlzLmN1cnJlbnRWYWx1ZV0udG9Mb3dlckNhc2UoKT09PXRoaXMuc2VhcmNoLnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgICAgICAgICAgICAgIHRoaXMuaXNPcGVuID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICB0aGlzLnByb2Nlc3NTZWFyY2g9ZmFsc2VcbiAgICAgICAgICAgICAgICAgIHRoaXMuc2V0UmVzdWx0KHRoaXMucmVzdWx0c1tpXSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMucHJvY2Vzc1NlYXJjaCAmJiAodGhpcy5mb3VuZC5sZW5ndGg9PT0wfHx0aGlzLmZvdW5kLmxlbmd0aD4wICYmIHRoaXMuc2VhcmNoICE9IHRoaXMucmVzdWx0ICkpIHtcbiAgICAgICAgICAgICAgdGhpcy5zZWFyY2g9JydcbiAgICAgICAgICAgICAgdGhpcy5mb3VuZD0nJ1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfS5iaW5kKHRoaXMpLCAxODApXG4gICAgICB9LFxuXG4gICAgICBvblRhYjpmdW5jdGlvbihldnQpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNPcGVuKSB7XG4gICAgICAgICAgaWYgKHRoaXMucmVzdWx0cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICB2YXIgaXggPSAwO1xuICAgICAgICAgICAgaWYgKHRoaXMuYXJyb3dDb3VudGVyID4gLTEpIHtcbiAgICAgICAgICAgICAgaXggPSB0aGlzLmFycm93Q291bnRlcjsgLy8gcGljayBhcnJvdyBzZWxlY3Rpb24gb3RoZXJ3aXNlIGZpcnN0IGl0ZW1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuc2V0UmVzdWx0KHRoaXMucmVzdWx0c1tpeF0pO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0aGlzLmlzT3BlbiA9IGZhbHNlO1xuICAgICAgICAgIHRoaXMucHJvY2Vzc1NlYXJjaCA9IGZhbHNlO1xuICAgICAgICAgIHRoaXMuYXJyb3dDb3VudGVyID0gLTE7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBpc0Z1bGw6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5mb3VuZC5sZW5ndGg+MFxuICAgICAgfSxcbiAgICAgIG9uQXJyb3dEb3duOmZ1bmN0aW9uIChldnQpIHtcbiAgICAgICAgaWYgKHRoaXMuYXJyb3dDb3VudGVyIDwgdGhpcy5yZXN1bHRzLmxlbmd0aC0xKSB7XG4gICAgICAgICAgdGhpcy5hcnJvd0NvdW50ZXIgPSB0aGlzLmFycm93Q291bnRlciArIDE7XG4gICAgICAgICAgdGhpcy5maXhTY3JvbGxpbmcoKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIG9uQXJyb3dVcDpmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLmFycm93Q291bnRlciA+IDApIHtcbiAgICAgICAgICB0aGlzLmFycm93Q291bnRlciA9IHRoaXMuYXJyb3dDb3VudGVyIC0gMTtcbiAgICAgICAgICB0aGlzLmZpeFNjcm9sbGluZygpXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBmaXhTY3JvbGxpbmc6ZnVuY3Rpb24gKCl7XG4gICAgICAgIGNvbnN0IGxpSCA9IHRoaXMuJHJlZnMub3B0aW9uc1t0aGlzLmFycm93Q291bnRlcl0uY2xpZW50SGVpZ2h0O1xuICAgICAgICB0aGlzLiRyZWZzLmF1dG9jb21wbGV0ZVJlc3VsdHMuc2Nyb2xsVG9wID0gbGlIICogdGhpcy5hcnJvd0NvdW50ZXI7XG4gICAgICB9LFxuICAgICAgb25FbnRlcjogZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoaXMuc2V0UmVzdWx0KHRoaXMucmVzdWx0c1t0aGlzLmFycm93Q291bnRlcl0pO1xuICAgICAgICB0aGlzLmlzT3BlbiA9IGZhbHNlO1xuICAgICAgICB0aGlzLmFycm93Q291bnRlciA9IC0xO1xuICAgICAgfSxcbiAgICAgIGhhbmRsZUNsaWNrT3V0c2lkZTogZnVuY3Rpb24oZXZ0KSB7XG4gICAgICAgIGlmICghdGhpcy4kZWwuY29udGFpbnMoZXZ0LnRhcmdldCkpIHtcbiAgICAgICAgICB0aGlzLmlzT3BlbiA9IGZhbHNlO1xuICAgICAgICAgIHRoaXMuYXJyb3dDb3VudGVyID0gLTE7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICAgIHdhdGNoOiB7XG4gICAgICBzZWxlY3RlZDogZnVuY3Rpb24gKHZhbCwgb2xkVmFsdWUpIHtcbiAgICAgICAgaWYgKHZhbFt0aGlzLnZhbHVlRmllbGRdIT1vbGRWYWx1ZVt0aGlzLnZhbHVlRmllbGRdKSB7XG4gICAgICAgICAgdGhpcy5zZWFyY2g9dmFsW3RoaXMudmFsdWVGaWVsZF1cbiAgICAgICAgICB0aGlzLmhpZGRlbklkPXZhbFt0aGlzLmtleUZpZWxkXVxuICAgICAgICAgIHRoaXMubGFzdFNlYXJjaD0gdGhpcy5zZWFyY2g7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBpdGVtczogZnVuY3Rpb24gKHZhbCwgb2xkVmFsdWUpIHtcbiAgICAgICAgaWYgKHZhbC5sZW5ndGggIT09IG9sZFZhbHVlLmxlbmd0aCkge1xuICAgICAgICAgIHRoaXMucmVzdWx0cyA9IHZhbDtcbiAgICAgICAgICB0aGlzLmlzTG9hZGluZyA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcbiAgICBjcmVhdGVkOiBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLmN1cnJlbnRTZWxlY3RlZD10aGlzLnNlbGVjdGVkXG4gICAgICBpZiAodGhpcy5zZWxlY3RlZCAmJiB0aGlzLnNlbGVjdGVkW3RoaXMudmFsdWVGaWVsZF0gJiYgdGhpcy5zZWxlY3RlZFt0aGlzLmtleUZpZWxkXSApIHtcbiAgICAgICAgdGhpcy5zZWFyY2g9dGhpcy5zZWxlY3RlZFt0aGlzLnZhbHVlRmllbGRdXG4gICAgICAgIHRoaXMuaGlkZGVuSWQ9dGhpcy5zZWxlY3RlZFt0aGlzLmtleUZpZWxkXVxuICAgICAgICB0aGlzLmxhc3RTZWFyY2g9IHRoaXMuc2VhcmNoO1xuICAgICAgfVxuICAgIH0sXG4gICAgbW91bnRlZDogZnVuY3Rpb24oKSB7XG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuaGFuZGxlQ2xpY2tPdXRzaWRlKVxuICAgICAgaWYgKHRoaXMuc2VsZWN0ZWQgJiYgdGhpcy5zZWxlY3RlZFt0aGlzLnZhbHVlRmllbGRdICYmIHRoaXMuc2VsZWN0ZWRbdGhpcy5rZXlGaWVsZF0pIHtcbiAgICAgICAgdGhpcy5zZWFyY2g9dGhpcy5zZWxlY3RlZFt0aGlzLnZhbHVlRmllbGRdXG4gICAgICAgIHRoaXMuaGlkZGVuSWQ9dGhpcy5zZWxlY3RlZFt0aGlzLmtleUZpZWxkXVxuICAgICAgICB0aGlzLmxhc3RTZWFyY2g9IHRoaXMuc2VhcmNoO1xuICAgICAgfVxuICAgIH0sXG4gICAgZGVzdHJveWVkOiBmdW5jdGlvbigpIHtcbiAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5oYW5kbGVDbGlja091dHNpZGUpXG4gICAgfVxuICB9O1xuPC9zY3JpcHQ+XG48c3R5bGUgc3JjPVwiLi92dWUtYXV0b2NvbXBsZXRpb24uY3NzXCI+PC9zdHlsZT4iLCJpbXBvcnQgbW9kIGZyb20gXCItIS4uL25vZGVfbW9kdWxlcy9iYWJlbC1sb2FkZXIvbGliL2luZGV4LmpzIS4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9pbmRleC5qcz8/dnVlLWxvYWRlci1vcHRpb25zIS4vVnVBdXRvY29tcGxldGlvblZhbGlkLnZ1ZT92dWUmdHlwZT1zY3JpcHQmbGFuZz1qcyZcIjsgZXhwb3J0IGRlZmF1bHQgbW9kOyBleHBvcnQgKiBmcm9tIFwiLSEuLi9ub2RlX21vZHVsZXMvYmFiZWwtbG9hZGVyL2xpYi9pbmRleC5qcyEuLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvaW5kZXguanM/P3Z1ZS1sb2FkZXItb3B0aW9ucyEuL1Z1QXV0b2NvbXBsZXRpb25WYWxpZC52dWU/dnVlJnR5cGU9c2NyaXB0Jmxhbmc9anMmXCIiLCJpbXBvcnQgeyByZW5kZXIsIHN0YXRpY1JlbmRlckZucyB9IGZyb20gXCIuL1Z1QXV0b2NvbXBsZXRpb25WYWxpZC52dWU/dnVlJnR5cGU9dGVtcGxhdGUmaWQ9MTNkNzk4ZWUmXCJcbmltcG9ydCBzY3JpcHQgZnJvbSBcIi4vVnVBdXRvY29tcGxldGlvblZhbGlkLnZ1ZT92dWUmdHlwZT1zY3JpcHQmbGFuZz1qcyZcIlxuZXhwb3J0ICogZnJvbSBcIi4vVnVBdXRvY29tcGxldGlvblZhbGlkLnZ1ZT92dWUmdHlwZT1zY3JpcHQmbGFuZz1qcyZcIlxuaW1wb3J0IHN0eWxlMCBmcm9tIFwiLi92dWUtYXV0b2NvbXBsZXRpb24uY3NzP3Z1ZSZ0eXBlPXN0eWxlJmluZGV4PTAmbGFuZz1jc3MmXCJcblxuXG4vKiBub3JtYWxpemUgY29tcG9uZW50ICovXG5pbXBvcnQgbm9ybWFsaXplciBmcm9tIFwiIS4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9ydW50aW1lL2NvbXBvbmVudE5vcm1hbGl6ZXIuanNcIlxudmFyIGNvbXBvbmVudCA9IG5vcm1hbGl6ZXIoXG4gIHNjcmlwdCxcbiAgcmVuZGVyLFxuICBzdGF0aWNSZW5kZXJGbnMsXG4gIGZhbHNlLFxuICBudWxsLFxuICBudWxsLFxuICBudWxsXG4gIFxuKVxuXG4vKiBob3QgcmVsb2FkICovXG5pZiAobW9kdWxlLmhvdCkge1xuICB2YXIgYXBpID0gcmVxdWlyZShcIi9ob21lL3ZhaGlkL3dvcmtzcGFjZS92aC92dWUtYXV0b2NvbXBsZXRpb24vbm9kZV9tb2R1bGVzL3Z1ZS1ob3QtcmVsb2FkLWFwaS9kaXN0L2luZGV4LmpzXCIpXG4gIGFwaS5pbnN0YWxsKHJlcXVpcmUoJ3Z1ZScpKVxuICBpZiAoYXBpLmNvbXBhdGlibGUpIHtcbiAgICBtb2R1bGUuaG90LmFjY2VwdCgpXG4gICAgaWYgKCFhcGkuaXNSZWNvcmRlZCgnMTNkNzk4ZWUnKSkge1xuICAgICAgYXBpLmNyZWF0ZVJlY29yZCgnMTNkNzk4ZWUnLCBjb21wb25lbnQub3B0aW9ucylcbiAgICB9IGVsc2Uge1xuICAgICAgYXBpLnJlbG9hZCgnMTNkNzk4ZWUnLCBjb21wb25lbnQub3B0aW9ucylcbiAgICB9XG4gICAgbW9kdWxlLmhvdC5hY2NlcHQoXCIuL1Z1QXV0b2NvbXBsZXRpb25WYWxpZC52dWU/dnVlJnR5cGU9dGVtcGxhdGUmaWQ9MTNkNzk4ZWUmXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGFwaS5yZXJlbmRlcignMTNkNzk4ZWUnLCB7XG4gICAgICAgIHJlbmRlcjogcmVuZGVyLFxuICAgICAgICBzdGF0aWNSZW5kZXJGbnM6IHN0YXRpY1JlbmRlckZuc1xuICAgICAgfSlcbiAgICB9KVxuICB9XG59XG5jb21wb25lbnQub3B0aW9ucy5fX2ZpbGUgPSBcInNyYy9WdUF1dG9jb21wbGV0aW9uVmFsaWQudnVlXCJcbmV4cG9ydCBkZWZhdWx0IGNvbXBvbmVudC5leHBvcnRzIiwiaW1wb3J0IFZ1ZUF1dG9jb21wbGV0aW9uIGZyb20gJy4vVnVlQXV0b2NvbXBsZXRpb24udnVlJ1xuaW1wb3J0IFZ1QXV0b2NvbXBsZXRpb25WYWxpZCBmcm9tICcuL1Z1QXV0b2NvbXBsZXRpb25WYWxpZC52dWUnXG53aW5kb3cuVnVlQXV0b2NvbXBsZXRpb24gPSBWdWVBdXRvY29tcGxldGlvbjtcbndpbmRvdy5WdUF1dG9jb21wbGV0aW9uVmFsaWQgPSBWdUF1dG9jb21wbGV0aW9uVmFsaWQ7XG4vKmV4cG9ydCBkZWZhdWx0IHtcbiAgICBpbnN0YWxsOmZ1bmN0aW9uKFZ1ZSkge1xuICAgICAgICBWdWUuY29tcG9uZW50KFZ1ZUF1dG9jb21wbGV0aW9uKTtcbiAgICAgICAgVnVlLmNvbXBvbmVudChWdUF1dG9jb21wbGV0aW9uVmFsaWQpO1xuICAgIH1cbn07XG4qL1xuZXhwb3J0IGRlZmF1bHQgVnVlQXV0b2NvbXBsZXRpb247XG5leHBvcnQgeyBWdWVBdXRvY29tcGxldGlvbiwgVnVBdXRvY29tcGxldGlvblZhbGlkIH07Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///2\n')}]);